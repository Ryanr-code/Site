<!DOCTYPE html>
<html lang="fr">
<head>
    <base target="_self">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATELIER CONSTRUCTION | L'Art de Bâtir</title>
    <meta name="description" content="Construction neuve, rénovation de prestige et aménagement d'espaces tertiaires.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        black: "#111111",
                        dark: "#1a1a1a",
                        gold: "#C5A059", 
                        cream: "#F9F9F7",
                        stone: "#e6e4e0"
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Lato"', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body { -webkit-font-smoothing: antialiased; }
        
        /* Transitions douces */
        .fade-enter { opacity: 0; transform: translateY(10px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: all 0.5s ease-out; }
        
        /* Custom Checkbox Design */
        .option-card.selected { border-color: #111; background-color: #F9F9F7; }
        .option-card.selected .check-icon { opacity: 1; transform: scale(1); }

        .ownership-option.selected,
        .timeline-option.selected,
        .reno-option.selected {
            border-color: #111;
            background-color: #F9F9F7;
        }
        
        /* Hide scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Timeline connector */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 1px;
            background: rgba(17,17,17,0.18);
            transform: translateX(-50%);
            z-index: 0;
        }
        @media (max-width: 767px) {
            .timeline-line::before { left: 20px; }
        }

/* Finish selection styles */
        .finish-option.selected {
            border-color: #111;
            background-color: #F9F9F7;
        }
        .finish-option.recommended {
            border-color: #111;
            background-color: #F9F9F7;
        }

        /* Image Hover Effects */
        .img-zoom-container { overflow: hidden; }
        .img-zoom { transition: transform 0.7s ease; }
        .group:hover .img-zoom { transform: scale(1.05); }
    </style>
</head>
<body class="bg-white text-black font-sans">

    <!-- Header -->
    <header class="fixed w-full top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100 transition-all duration-300" id="navbar">
        <div class="container mx-auto px-6 py-5 flex justify-between items-center">
            <a href="#" class="text-2xl font-serif tracking-widest font-bold uppercase">Atelier<span class="text-xs align-top ml-1 font-sans font-normal text-gray-500">Constructions</span></a>
            
            <nav class="hidden md:flex space-x-10 text-xs uppercase tracking-widest font-bold text-gray-500">
                <a href="#signatures" class="hover:text-black transition-colors">Inspirations</a>
                <a href="#philosophie" class="hover:text-black transition-colors">Expertise</a>
                <a href="#chronologie" class="hover:text-black transition-colors">Parcours</a>
                <a href="#realisations" class="hover:text-black transition-colors">Réalisations</a>
            </nav>

            <button id="estimate-btn" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800 transition-colors shadow-lg">
                Estimer mon projet
            </button>
        </div>
</header>

    <main class="pt-20">
        
        <!-- Hero -->
        <section class="relative h-[90vh] w-full overflow-hidden flex items-center justify-center bg-gray-900">
            <!-- Background Image with Overlay -->
            <div class="absolute inset-0 w-full h-full">
                <img src="https://picsum.photos/1920/1080?random=101" alt="Architecture Moderne" class="w-full h-full object-cover opacity-70">
                <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/60"></div>
            </div>
            
            <div class="relative z-10 text-center text-white px-4 max-w-5xl">
                <span class="block text-xs md:text-sm uppercase tracking-[0.4em] mb-6 text-gray-200 border-b border-white/20 pb-6 inline-block px-8">Résidentiel & Tertiaire</span>
                <h1 class="text-5xl md:text-7xl font-serif mb-8 leading-tight">L'exigence du détail.<br>La passion de bâtir.</h1>
                <p class="text-lg font-light text-gray-200 mb-10 max-w-2xl mx-auto">
                    Nous transformons vos ambitions en espaces d'exception. De la conception à la remise des clés, vivez une expérience de construction sereine.
                </p>
                <div class="flex flex-col md:flex-row gap-4 justify-center">
                    <button id="start-study-btn" class="bg-white text-black px-10 py-4 text-xs uppercase tracking-widest hover:bg-gray-200 transition-all duration-300 font-bold">
                        Démarrer l'étude
                    </button>
                    <a href="#signatures" class="border border-white text-white px-10 py-4 text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-all duration-300">
                        Voir nos réalisations
                    </a>
                </div>
            </div>
        </section>

        <!-- Trust Indicators (Redesigned - Architectural Manifesto Style) -->
        <section class="bg-white py-24">
            <div class="container mx-auto px-6 max-w-6xl">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12 md:gap-20">
                    
                    <!-- Pillar 1 -->
                    <div class="flex flex-col items-start group">
                        <span class="text-xs font-bold text-gray-300 mb-4 group-hover:text-black transition-colors">01</span>
                        <h3 class="font-serif text-2xl mb-4 text-black">Maîtrise</h3>
                        <div class="w-12 h-px bg-gray-200 mb-6 group-hover:w-24 group-hover:bg-black transition-all duration-500"></div>
                        <p class="text-sm text-gray-500 leading-relaxed font-light">
                            L'alliance de l'esthétique et de la performance. Nous sélectionnons des matériaux nobles et durables pour des constructions qui traversent le temps.
                        </p>
                    </div>

                    <!-- Pillar 2 -->
                    <div class="flex flex-col items-start group">
                        <span class="text-xs font-bold text-gray-300 mb-4 group-hover:text-black transition-colors">02</span>
                        <h3 class="font-serif text-2xl mb-4 text-black">Sérénité</h3>
                        <div class="w-12 h-px bg-gray-200 mb-6 group-hover:w-24 group-hover:bg-black transition-all duration-500"></div>
                        <p class="text-sm text-gray-500 leading-relaxed font-light">
                            Un cadre contractuel sécurisé. Votre projet est couvert par l'ensemble des garanties légales (Décennale & Responsabilité Civile Professionnelle).
                        </p>
                    </div>

                    <!-- Pillar 3 -->
                    <div class="flex flex-col items-start group">
                        <span class="text-xs font-bold text-gray-300 mb-4 group-hover:text-black transition-colors">03</span>
                        <h3 class="font-serif text-2xl mb-4 text-black">Clarté</h3>
                        <div class="w-12 h-px bg-gray-200 mb-6 group-hover:w-24 group-hover:bg-black transition-all duration-500"></div>
                        <p class="text-sm text-gray-500 leading-relaxed font-light">
                            Une gestion de projet transparente. Des coûts maîtrisés et un calendrier respecté pour avancer en toute confiance, sans surprise.
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Section Signatures (Visual Showcase) -->
        <section id="signatures" class="py-24 bg-cream">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Inspirations</span>
                    <h2 class="text-4xl font-serif mt-3 mb-6">Nos Signatures</h2>
                    <p class="text-gray-500 max-w-2xl mx-auto">Découvrez la diversité de nos savoir-faire à travers une sélection de projets récents.</p>
                </div>

                <!-- Masonry Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 h-auto md:h-[600px]">
                    <!-- Large Item Left -->
                    <div class="lg:col-span-2 lg:row-span-2 group relative overflow-hidden cursor-pointer h-96 md:h-full">
                        <img src="https://picsum.photos/800/800?random=50" class="w-full h-full object-cover img-zoom" alt="Villa Contemporaine">
                        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all"></div>
                        <div class="absolute bottom-0 left-0 p-8 text-white">
                            <span class="text-xs uppercase tracking-widest bg-black/50 px-2 py-1 mb-2 inline-block backdrop-blur-sm">Construction Neuve</span>
                            <h3 class="text-2xl font-serif">Villa "Horizon"</h3>
                        </div>
                    </div>
                    
                    <!-- Top Right 1 -->
                    <div class="group relative overflow-hidden cursor-pointer h-64 md:h-full">
                        <img src="https://picsum.photos/400/600?random=51" class="w-full h-full object-cover img-zoom" alt="Intérieur Design">
                        <div class="absolute bottom-0 left-0 p-6 text-white bg-gradient-to-t from-black/80 to-transparent w-full">
                            <h3 class="text-lg font-serif">Intérieurs Sur-mesure</h3>
                        </div>
                    </div>

                    <!-- Top Right 2 -->
                    <div class="group relative overflow-hidden cursor-pointer h-64 md:h-full">
                        <img src="https://picsum.photos/400/600?random=52" class="w-full h-full object-cover img-zoom" alt="Rénovation">
                        <div class="absolute bottom-0 left-0 p-6 text-white bg-gradient-to-t from-black/80 to-transparent w-full">
                            <h3 class="text-lg font-serif">Rénovation Haussmannienne</h3>
                        </div>
                    </div>

                    <!-- Bottom Right Wide (spanning 2 cols on desktop if needed, here kept simple) -->
                    <div class="lg:col-span-2 group relative overflow-hidden cursor-pointer h-64 md:h-full hidden lg:block">
                        <img src="https://picsum.photos/800/400?random=53" class="w-full h-full object-cover img-zoom" alt="Bureaux">
                        <div class="absolute bottom-0 left-0 p-6 text-white bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest bg-black/50 px-2 py-1 mb-2 inline-block backdrop-blur-sm">Tertiaire</span>
                            <h3 class="text-lg font-serif">Siège Social & Open Space</h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Philosophie -->
        <section class="py-24 bg-white" id="philosophie">
<div class="container mx-auto px-6 max-w-6xl">
<div class="flex flex-col md:flex-row gap-16 items-center">
<div class="md:w-1/2">
<span class="text-xs font-bold uppercase tracking-widest text-gray-400 mb-2 block">Notre Approche</span>
<h2 class="text-4xl font-serif mb-6">Une vision globale de l'habitat.</h2>
<p class="text-gray-600 leading-relaxed mb-6 text-lg font-light">« Le luxe se révèle dans l’invisible : précision, discrétion, exigence. »</p>
<p class="text-gray-600 leading-relaxed mb-6">En tant que contractant général haut de gamme, Atelier Constructions pilote votre projet de A à Z : conception, chiffrage, achats, coordination des corps d’état, exécution et livraison.</p>
<p class="text-gray-600 leading-relaxed mb-8">Un seul interlocuteur, un budget cadré, un planning maîtrisé — et une obsession : la qualité de finition, réalisée dans les règles du métier.</p>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
<div class="border border-gray-200 bg-gray-50 p-5">
<div class="flex items-start gap-3">
<i class="fa-solid fa-compass-drafting text-gray-500 mt-1"></i>
<div>
<div class="text-xs uppercase tracking-widest text-gray-500 font-bold">Conception</div>
<div class="font-serif text-lg">Architecture, plans &amp; budget</div>
<p class="text-sm text-gray-500 mt-1 leading-relaxed">Croquis et plans, conseils techniques et estimation précise. Ensemble, nous validons la faisabilité, le budget et le calendrier avant de démarrer.</p>
</div>
</div>
</div>
<div class="border border-gray-200 bg-gray-50 p-5">
<div class="flex items-start gap-3">
<i class="fa-solid fa-ruler-combined text-gray-500 mt-1"></i>
<div>
<div class="text-xs uppercase tracking-widest text-gray-500 font-bold">Sur‑mesure</div>
<div class="font-serif text-lg">Aménagements &amp; finitions signature</div>
<p class="text-sm text-gray-500 mt-1 leading-relaxed">Cuisines, rangements, menuiseries, pierre, métal, éclairage, maison connectée… Nous vous accompagnons dans les choix, puis nous validons teintes et matières sur échantillons (et, si utile, prototypes) pour un rendu irréprochable.</p>
</div>
</div>
</div>
<div class="border border-gray-200 bg-gray-50 p-5">
<div class="flex items-start gap-3">
<i class="fa-solid fa-shield-check text-gray-500 mt-1"></i>
<div>
<div class="text-xs uppercase tracking-widest text-gray-500 font-bold">Qualité</div>
<div class="font-serif text-lg">Exécution soignée &amp; contrôles</div>
<p class="text-sm text-gray-500 mt-1 leading-relaxed">Travaux réalisés dans les règles du métier, avec des contrôles à chaque étape clé. Si nécessaire, un contrôle indépendant intervient. Tout est tracé, et vous recevez un dossier de fin de chantier clair.</p>
</div>
</div>
</div>
<div class="border border-gray-200 bg-gray-50 p-5">
<div class="flex items-start gap-3">
<i class="fa-solid fa-user-tie text-gray-500 mt-1"></i>
<div>
<div class="text-xs uppercase tracking-widest text-gray-500 font-bold">Pilotage</div>
<div class="font-serif text-lg">Un seul interlocuteur &amp; sérénité</div>
<p class="text-sm text-gray-500 mt-1 leading-relaxed">Un interlocuteur unique du devis à la livraison : coordination de tous les intervenants, protection des lieux et chantier discret. Budget et délais suivis, assurances professionnelles obligatoires, réception, corrections éventuelles et service après‑travaux réactif.</p>
</div>
</div>
</div>
</div>
<div class="mt-8 flex gap-4">
<div class="text-center">
<span class="block text-3xl font-serif font-bold">10+</span>
<span class="text-xs uppercase text-gray-500">Années d'expérience</span>
</div>
<div class="w-px bg-gray-300 h-12"></div>
<div class="text-center">
<span class="block text-3xl font-serif font-bold">200+</span>
<span class="text-xs uppercase text-gray-500">Projets livrés</span>
</div>
</div>
</div>
<div class="md:w-1/2 relative">
<div class="absolute -top-4 -left-4 w-24 h-24 bg-gray-200 z-0"></div>
<img alt="Architecte au travail" class="w-full h-[500px] object-cover relative z-10 shadow-xl" src="https://picsum.photos/600/700?random=60"/>
<div class="absolute -bottom-6 -right-6 bg-white p-6 shadow-lg z-20 max-w-xs hidden md:block">
<p class="font-serif italic text-gray-600">« Le luxe, c’est la maîtrise du détail — jusqu’à l’invisible. »</p>
</div>
</div>
</div>
</div>
</section>

        <!-- Chronologie / Offre -->
        <section id="chronologie" class="py-24 bg-cream">
    <div class="max-w-7xl mx-auto px-6">
        <div class="text-center max-w-3xl mx-auto">
            <h2 class="font-serif text-4xl font-semibold text-black mb-6">Chronologie du projet</h2>
            <p class="text-lg text-gray-600 leading-relaxed">Une méthode structurée, lisible et rassurante — de l’étude à l’accompagnement post-livraison.</p>
        </div>

        <div class="relative max-w-5xl mx-auto mt-16 timeline-line">
            <!-- Étapes (sans défilement horizontal) -->
            <div class="space-y-10 md:space-y-12">

                <!-- 1 -->
                <div class="relative md:grid md:grid-cols-2 md:gap-x-16">
                    <span class="absolute left-[20px] md:left-1/2 top-7 w-3 h-3 bg-black rounded-full -translate-x-1/2 ring-4 ring-cream"></span>
                    <span class="hidden md:block absolute left-1/2 top-7 h-px w-12 bg-black/20 -translate-x-full"></span>

                    <div class="pl-12 md:pl-0 md:pr-12 md:text-right">
                        <h3 class="font-serif text-xl font-medium text-black mb-2">1. Ingénierie — Études & chiffrage</h3>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Analyse technique, estimations, faisabilité, budget et planning prévisionnel.
                        </p>
                    </div>
                    <div class="hidden md:block"></div>
                </div>

                <!-- 2 -->
                <div class="relative md:grid md:grid-cols-2 md:gap-x-16">
                    <span class="absolute left-[20px] md:left-1/2 top-7 w-3 h-3 bg-black rounded-full -translate-x-1/2 ring-4 ring-cream"></span>
                    <span class="hidden md:block absolute left-1/2 top-7 h-px w-12 bg-black/20"></span>

                    <div class="hidden md:block"></div>
                    <div class="pl-12 md:col-start-2 md:pl-12">
                        <h3 class="font-serif text-xl font-medium text-black mb-2">2. Architecture & plans</h3>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Esquisse, optimisation, permis & autorisations.
                        </p>
                    </div>
                </div>

                <!-- 3 -->
                <div class="relative md:grid md:grid-cols-2 md:gap-x-16">
                    <span class="absolute left-[20px] md:left-1/2 top-7 w-3 h-3 bg-black rounded-full -translate-x-1/2 ring-4 ring-cream"></span>
                    <span class="hidden md:block absolute left-1/2 top-7 h-px w-12 bg-black/20 -translate-x-full"></span>

                    <div class="pl-12 md:pl-0 md:pr-12 md:text-right">
                        <h3 class="font-serif text-xl font-medium text-black mb-2">3. Conception & détails</h3>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Agencements, finitions, détails d’exécution, conformité aux normes & règles du métier.
                            Selon le projet&nbsp;: bureau d’étude, plans soumis à un bureau de contrôle.
                        </p>
                    </div>
                    <div class="hidden md:block"></div>
                </div>

                <!-- 4 -->
                <div class="relative md:grid md:grid-cols-2 md:gap-x-16">
                    <span class="absolute left-[20px] md:left-1/2 top-7 w-3 h-3 bg-black rounded-full -translate-x-1/2 ring-4 ring-cream"></span>
                    <span class="hidden md:block absolute left-1/2 top-7 h-px w-12 bg-black/20"></span>

                    <div class="hidden md:block"></div>
                    <div class="pl-12 md:col-start-2 md:pl-12">
                        <h3 class="font-serif text-xl font-medium text-black mb-2">4. Réalisation & suivi</h3>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Pilotage, coordination des corps d’état, points de contrôle et levées de réserves.
                        </p>
                    </div>
                </div>

                <!-- 5 -->
                <div class="relative md:grid md:grid-cols-2 md:gap-x-16">
                    <span class="absolute left-[20px] md:left-1/2 top-7 w-3 h-3 bg-black rounded-full -translate-x-1/2 ring-4 ring-cream"></span>
                    <span class="hidden md:block absolute left-1/2 top-7 h-px w-12 bg-black/20 -translate-x-full"></span>

                    <div class="pl-12 md:pl-0 md:pr-12 md:text-right">
                        <h3 class="font-serif text-xl font-medium text-black mb-2">5. Livraison & accompagnement</h3>
                        <p class="text-sm text-gray-600 leading-relaxed">
                            Visite de fin de travaux, dossier de fin de chantier, garanties et accompagnement après livraison.
                        </p>
                    </div>
                    <div class="hidden md:block"></div>
                </div>

            </div>
        </div>
    </div>
</section>

        <!-- SIMULATOR -->
        <section id="simulateur" class="py-24 bg-stone/20">
            <div class="container mx-auto px-4 md:px-6 max-w-5xl">
                
                <div class="text-center mb-12">
                    <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Étude de projet</span>
                    <h2 class="text-3xl md:text-4xl font-serif mt-2">Simulateur de Coût</h2>
                    <p class="text-gray-500 mt-2 font-light">Obtenez une première estimation pour votre projet Résidentiel ou Tertiaire</p>
                </div>

                <div class="bg-white border border-gray-200 shadow-2xl relative min-h-[600px] overflow-hidden rounded-sm">
                    
                    <!-- Progress Bar -->
                    <div class="w-full h-1 bg-gray-100">
                        <div id="progress-bar" class="h-full bg-black transition-all duration-500 ease-out" style="width: 16.6667%"></div>
                    </div>

                    <div class="p-8 md:p-12">
                        
                        <!-- STEP 1: Type -->
                        <div id="step-1" class="sim-step fade-enter-active">
                            <h3 class="text-2xl font-serif mb-8 text-center">Quelle est la nature de votre projet ?</h3>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <label class="cursor-pointer group">
                                    <input type="radio" name="projectType" value="new" class="hidden">
                                    <div class="project-type-option border border-gray-200 p-8 text-center hover:border-black transition-all duration-300 h-full flex flex-col items-center justify-center group-hover:bg-gray-50" data-type="new">
                                        <i class="fa-solid fa-house text-3xl mb-4 text-gray-400 group-hover:text-black"></i>
                                        <span class="text-lg font-serif">Construction Neuve</span>
                                        <span class="text-xs text-gray-400 mt-2">Maison individuelle</span>
                                    </div>
                                </label>
                                <label class="cursor-pointer group">
                                    <input type="radio" name="projectType" value="reno" class="hidden">
                                    <div class="project-type-option border border-gray-200 p-8 text-center hover:border-black transition-all duration-300 h-full flex flex-col items-center justify-center group-hover:bg-gray-50" data-type="reno">
                                        <i class="fa-solid fa-hammer text-3xl mb-4 text-gray-400 group-hover:text-black"></i>
                                        <span class="text-lg font-serif">Rénovation</span>
                                        <span class="text-xs text-gray-400 mt-2">Appartement / Maison</span>
                                    </div>
                                </label>
                                <label class="cursor-pointer group">
                                    <input type="radio" name="projectType" value="tertiary" class="hidden">
                                    <div class="project-type-option border border-gray-200 p-8 text-center hover:border-black transition-all duration-300 h-full flex flex-col items-center justify-center group-hover:bg-gray-50" data-type="tertiary">
                                        <i class="fa-solid fa-building text-3xl mb-4 text-gray-400 group-hover:text-black"></i>
                                        <span class="text-lg font-serif">Espaces Tertiaires</span>
                                        <span class="text-xs text-gray-400 mt-2">Bureaux / Commerces</span>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- STEP 2: Dimensions -->
                        <div id="step-2" class="sim-step hidden">
                            <h3 class="text-2xl font-serif mb-8 text-center">Dimensions & Structure</h3>
                            
                            <div class="space-y-12 max-w-2xl mx-auto">
                                <!-- Reno Dwelling Type -->
                                <div id="reno-dwelling-fields" class="space-y-4 hidden">
                                    <div class="flex items-center justify-between">
                                        <label class="text-sm uppercase tracking-widest font-bold">Type de bien</label>
                                        <span class="text-xs text-gray-400">Réhabilitation</span>
                                    </div>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                        <button type="button" class="reno-option border border-gray-200 p-4 text-left hover:border-black transition" data-value="apartment">
                                            <div class="font-serif text-lg">Appartement</div>
                                            <div class="text-xs text-gray-500 mt-1">Coefficient +5%</div>
                                        </button>
                                        <button type="button" class="reno-option border border-gray-200 p-4 text-left hover:border-black transition" data-value="house">
                                            <div class="font-serif text-lg">Maison</div>
                                            <div class="text-xs text-gray-500 mt-1">Coefficient standard</div>
                                        </button>
                                    </div>
                                    <p id="reno-dwelling-error" class="text-xs text-red-600 hidden">Merci de sélectionner Appartement ou Maison.</p>
                                </div>

                                <!-- Surface -->
                                <div>
                                    <div class="flex justify-between mb-4">
                                        <label class="text-sm uppercase tracking-widest font-bold">Surface (m²)</label>
                                        <span class="font-serif text-3xl"><span id="surface-display">120</span> m²</span>
                                    </div>
                                    <input type="range" id="surface-input" min="30" max="1000" value="120" class="w-full h-1 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-black">
                                </div>

                                <!-- Bathrooms / Sanitaires -->
                                <div id="bathroom-fields" class="flex items-center justify-between border-b border-gray-100 pb-6">
                                    <div>
                                        <span class="block text-lg font-serif" id="bath-label">Salles de bain</span>
                                        <span class="text-xs text-gray-400" id="bath-sublabel">Points d'eau complets</span>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <button id="bath-minus" class="w-8 h-8 rounded-full border border-gray-300 hover:border-black flex items-center justify-center transition-colors">-</button>
                                        <span id="bath-count" class="font-serif text-xl w-6 text-center">1</span>
                                        <button id="bath-plus" class="w-8 h-8 rounded-full border border-gray-300 hover:border-black flex items-center justify-center transition-colors">+</button>
                                    </div>
                                </div>

                                <!-- Bedrooms -->
                                <div id="bedroom-fields" class="flex items-center justify-between border-b border-gray-100 pb-6">
                                    <div>
                                        <span class="block text-lg font-serif" id="bedroom-label">Chambres</span>
                                        <span class="text-xs text-gray-400" id="bedroom-sublabel">Hors pièces annexes</span>
                                    </div>
                                    <div class="flex items-center space-x-4">
                                        <button id="bedroom-minus" class="w-8 h-8 rounded-full border border-gray-300 hover:border-black flex items-center justify-center transition-colors">-</button>
                                        <span id="bedroom-count" class="font-serif text-xl w-6 text-center">2</span>
                                        <button id="bedroom-plus" class="w-8 h-8 rounded-full border border-gray-300 hover:border-black flex items-center justify-center transition-colors">+</button>
                                    </div>
                                </div>

                                <!-- New Construction Only Fields -->
                                <div id="new-construction-fields" class="space-y-10">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                        <div>
                                            <label class="block text-sm uppercase tracking-widest font-bold mb-4">Niveaux</label>
                                            <div class="flex space-x-2">
                                                <button type="button" class="floor-btn flex-1 py-3 border border-gray-200 text-sm hover:border-black transition-all" data-val="1">Plain-pied</button>
                                                <button type="button" class="floor-btn flex-1 py-3 border border-gray-200 text-sm hover:border-black transition-all" data-val="2">R+1</button>
                                                <button type="button" class="floor-btn flex-1 py-3 border border-gray-200 text-sm hover:border-black transition-all" data-val="3">R+2</button>
                                            </div>
                                        </div>
                                        
                                        <div>
                                            <label class="block text-sm uppercase tracking-widest font-bold mb-4">Sous-sol</label>
                                            <div class="flex space-x-4">
                                                <label class="cursor-pointer flex-1">
                                                    <input type="radio" name="basement" value="no" class="hidden" checked>
                                                    <div class="basement-btn py-3 border border-gray-200 text-center text-sm hover:border-black transition-all" data-value="no">Non</div>
                                                </label>
                                                <label class="cursor-pointer flex-1">
                                                    <input type="radio" name="basement" value="yes" class="hidden">
                                                    <div class="basement-btn py-3 border border-gray-200 text-center text-sm hover:border-black transition-all" data-value="yes">Oui</div>
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex justify-between pt-4">
                                    
                                    <button type="button" id="prev-step-2" class="text-gray-400 hover:text-black text-xs uppercase tracking-widest">Précédent</button>

                                    <button type="button" id="next-step-2" class="bg-black text-white px-8 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">Suivant</button>
                                </div>
                            </div>
                        </div>

                        <!-- STEP 3: Finishes -->
                        <div id="step-3" class="sim-step hidden">
                            <h3 class="text-2xl font-serif mb-8 text-center">Niveau de Finition</h3>
                            
                            <div class="max-w-3xl mx-auto space-y-10">
                                <!-- Finish Level -->
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <label class="cursor-pointer group">
                                        <input type="radio" name="finish" value="eco" class="hidden">
                                        <div id="finish-eco" class="finish-option border border-gray-200 p-6 hover:border-black transition-all h-full group-hover:bg-gray-50" data-finish="eco">
                                            <span class="block font-serif text-lg mb-2">Essentielle</span>
                                            <p class="text-xs text-gray-500">Matériaux standards, fonctionnel et durable.</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer group">
                                        <input type="radio" name="finish" value="standard" class="hidden" checked>
                                        <div id="finish-standard" class="finish-option recommended border border-black bg-gray-50 p-6 transition-all h-full relative" data-finish="standard">
                                            <div class="absolute top-2 right-2 text-xs font-bold uppercase">Recommandé</div>
                                            <span class="block font-serif text-lg mb-2">Contemporaine</span>
                                            <p class="text-xs text-gray-500">Finitions soignées, isolation renforcée, design.</p>
                                        </div>
                                    </label>
                                    <label class="cursor-pointer group">
                                        <input type="radio" name="finish" value="premium" class="hidden">
                                        <div id="finish-premium" class="finish-option border border-gray-200 p-6 hover:border-black transition-all h-full group-hover:bg-gray-50" data-finish="premium">
                                            <span class="block font-serif text-lg mb-2">Prestige</span>
                                            <p class="text-xs text-gray-500">Matériaux nobles, sur-mesure, haute technicité.</p>
                                        </div>
                                    </label>
                                </div>

                                <div class="flex justify-between pt-8">
                                    <button type="button" id="prev-step-3" class="text-gray-400 hover:text-black text-xs uppercase tracking-widest">Retour</button>
                                    <button type="button" id="next-step-3" class="bg-black text-white px-8 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">Suivant</button>
                                </div>
                            </div>
                        </div>

                        <!-- STEP 4: Options -->
                        <div id="step-4" class="sim-step hidden">
                            <h3 class="text-2xl font-serif mb-2 text-center">Options & Équipements</h3>
                            <p class="text-center text-gray-400 text-sm mb-8">Personnalisez votre projet</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8 max-w-3xl mx-auto">
                                
                                <!-- Technical Options (Common) -->
                                <div id="residential-options">
                                    <h4 class="text-xs font-bold uppercase tracking-widest mb-4 border-b pb-2">Confort Thermique & Sécurité</h4>
                                    <div class="space-y-3">
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="pac">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-fan w-8 text-gray-400"></i>
                                                    <span class="font-serif">Pompe à Chaleur (PAC)</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="clim">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-snowflake w-8 text-gray-400"></i>
                                                    <span class="font-serif">Climatisation Gainable</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="alarm">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-shield-halved w-8 text-gray-400"></i>
                                                    <span class="font-serif">Alarme & Sécurité</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Residential Extras -->
                                <div id="residential-extras">
                                    <h4 class="text-xs font-bold uppercase tracking-widest mb-4 border-b pb-2">Extérieurs & Annexes</h4>
                                    <div class="space-y-3">
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="pool">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-water w-8 text-gray-400"></i>
                                                    <span class="font-serif">Piscine Enterrée</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="garage">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-car w-8 text-gray-400"></i>
                                                    <span class="font-serif">Garage Double</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <!-- Tertiary Options (Hidden for Residential) -->
                                <div id="tertiary-options" class="hidden">
                                    <h4 class="text-xs font-bold uppercase tracking-widest mb-4 border-b pb-2">Solutions Pro</h4>
                                    <div class="space-y-3">
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="network">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-server w-8 text-gray-400"></i>
                                                    <span class="font-serif">Réseau & Baie Info</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="acoustic">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-volume-xmark w-8 text-gray-400"></i>
                                                    <span class="font-serif">Cloisonnement Acoustique</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="access">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-key w-8 text-gray-400"></i>
                                                    <span class="font-serif">Contrôle d'Accès</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                        <label class="cursor-pointer block">
                                            <input type="checkbox" class="option-check hidden" value="camera">
                                            <div class="option-card border border-gray-200 p-4 flex items-center justify-between hover:border-gray-400 transition-all">
                                                <div class="flex items-center">
                                                    <i class="fa-solid fa-video w-8 text-gray-400"></i>
                                                    <span class="font-serif">Système de Caméras</span>
                                                </div>
                                                <div class="w-5 h-5 border border-gray-300 rounded-full flex items-center justify-center check-icon opacity-0 transition-all bg-black text-white text-xs"><i class="fa-solid fa-check"></i></div>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                            </div>

                            <div class="flex justify-between pt-4">
                                <button type="button" id="prev-step-4" class="text-gray-400 hover:text-black text-xs uppercase tracking-widest">Retour</button>
                                <button type="button" id="calculate-btn" class="bg-black text-white px-10 py-4 text-xs uppercase tracking-widest hover:bg-gray-800 w-full md:w-auto shadow-lg">
                                    Voir l'estimation
                                </button>
                            </div>
                        </div>

                        
                        <!-- STEP 5: Qualification -->
                        <div id="step-5" class="sim-step hidden">
                            <h3 class="text-xl font-semibold mb-2">Votre situation</h3>
                            <p class="text-sm text-gray-600 mb-6">Ces informations nous aident à vous orienter rapidement (délais, démarches, priorités).</p>

                            <div class="space-y-6">
                                <div>
                                    <p id="ownership-question" class="text-sm font-medium mb-3">Avez-vous déjà le terrain ?</p>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                                        <button type="button" class="ownership-option border border-gray-200 rounded-xl p-4 text-left hover:border-black transition" data-value="yes">
                                            <div class="text-sm font-semibold">Oui</div>
                                            <div id="ownership-yes-sub" class="text-xs text-gray-600 mt-1">Je l’ai déjà / il est en cours d’achat.</div>
                                        </button>
                                        <button type="button" class="ownership-option border border-gray-200 rounded-xl p-4 text-left hover:border-black transition" data-value="no">
                                            <div class="text-sm font-semibold">Non</div>
                                            <div id="ownership-no-sub" class="text-xs text-gray-600 mt-1">Je suis en recherche / je n’ai pas encore trouvé.</div>
                                        </button>
                                    </div>
                                </div>

                                <div>
                                    <p class="text-sm font-medium mb-3">À quelle échéance souhaitez-vous lancer le projet ?</p>
                                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
                                        <button type="button" class="timeline-option border border-gray-200 rounded-xl p-4 text-left hover:border-black transition" data-value="lt1">
                                            <div class="text-sm font-semibold">&lt; 1 mois</div>
                                            <div class="text-xs text-gray-600 mt-1">Décision rapide.</div>
                                        </button>
                                        <button type="button" class="timeline-option border border-gray-200 rounded-xl p-4 text-left hover:border-black transition" data-value="1to3">
                                            <div class="text-sm font-semibold">1 à 3 mois</div>
                                            <div class="text-xs text-gray-600 mt-1">Calendrier standard.</div>
                                        </button>
                                        <button type="button" class="timeline-option border border-gray-200 rounded-xl p-4 text-left hover:border-black transition" data-value="gt3">
                                            <div class="text-sm font-semibold">&gt; 3 mois</div>
                                            <div class="text-xs text-gray-600 mt-1">Vous préparez le projet.</div>
                                        </button>
                                    </div>
                                </div>

                                <p id="step5-error" class="text-xs text-red-600 hidden">Merci de répondre aux deux questions pour continuer.</p>
                            </div>

                            <div class="mt-8 flex justify-between gap-3">
                                <button type="button" id="prev-step-5" class="px-5 py-3 rounded-xl border border-gray-200 hover:border-black transition text-sm font-medium">Retour</button>
                                <button type="button" id="calculate-btn-final" class="px-5 py-3 rounded-xl bg-black text-white hover:bg-gray-900 transition text-sm font-medium">Voir l’estimation</button>
                            </div>
                        </div>

<!-- STEP 6: Result -->
                        <div id="step-6" class="sim-step hidden text-center">
                            <div class="mb-8">
                                <div class="w-16 h-16 bg-black text-white rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i class="fa-solid fa-check text-2xl"></i>
                                </div>
                                <h3 class="text-3xl font-serif">Estimation de votre projet</h3>
                            </div>

                            <div class="bg-cream p-10 max-w-lg mx-auto mb-10 border border-gray-100 shadow-inner">
                                <div class="text-xs uppercase tracking-widest text-gray-500 mb-2">Budget Estimatif Global</div>
                                <div class="text-5xl font-serif text-black mb-2" id="final-price">-- €</div>
                                <div id="price-suffix" class="text-xs text-gray-400 mb-6">TTC (Hors terrain)</div>
                                
                                <div class="pt-6 border-t border-gray-200 text-left space-y-3 text-sm text-gray-600">
                                    <div class="flex justify-between"><span>Type</span> <span id="res-type" class="font-bold text-black"></span></div>
                                    <div class="flex justify-between"><span>Surface</span> <span id="res-surface" class="font-bold text-black"></span></div>
                                    <div class="flex justify-between"><span>Finition</span> <span id="res-finish" class="font-bold capitalize text-black"></span></div>
                        <div class="flex justify-between"><span id="res-ownership-label" class="text-black">Terrain / Bien</span><span id="res-ownership" class="font-bold text-black"></span></div>
                        <div class="flex justify-between"><span class="text-black">Échéance</span><span id="res-timeline" class="font-bold text-black"></span></div>
                                    <div class="flex justify-between"><span>Options</span> <span id="res-options" class="font-bold text-right text-black max-w-[50%]"></span></div>
                                </div>
                            </div>

                            <div class="max-w-md mx-auto">
                                <p class="text-sm text-gray-500 mb-6">Recevez le détail complet et une étude de faisabilité gratuite.</p>
                                <div class="flex gap-2">
                                    <input id="sim-email" type="email" placeholder="Votre Email" class="flex-1 p-3 border border-gray-300 focus:border-black outline-none bg-white">
                                    <button type="button" id="send-estimate-btn" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">
                                        Envoyer
                                    </button>
                                </div>
                            </div>
<div id="email-status" class="mt-4 hidden" aria-live="polite"></div>
                            
                            <button type="button" id="reset-sim" class="mt-8 text-xs text-gray-400 underline hover:text-black">Nouvelle simulation</button>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Grid Expanded -->
        <section id="realisations" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="flex justify-between items-end mb-12">
                    <div>
                        <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Portfolio</span>
                        <h2 class="text-3xl font-serif mt-2">Dernières Réalisations</h2>
                    </div>
                    <a href="#" class="hidden md:block text-xs uppercase tracking-widest border-b border-black pb-1 hover:text-gray-600">Voir tous les projets</a>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Project 1 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=10" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Maison Contemporaine">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Résidentiel</span>
                            <h3 class="font-serif text-xl">Villa H</h3>
                        </div>
                    </div>
                    <!-- Project 2 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=11" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Rénovation Appartement">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Rénovation</span>
                            <h3 class="font-serif text-xl">Appartement Haussmannien</h3>
                        </div>
                    </div>
                    <!-- Project 3 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=15" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Bureaux Open Space">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Tertiaire</span>
                            <h3 class="font-serif text-xl">Siège Social Tech</h3>
                        </div>
                    </div>
                    <!-- Project 4 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=22" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Extension Bois">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Extension</span>
                            <h3 class="font-serif text-xl">Maison Bois & Verre</h3>
                        </div>
                    </div>
                    <!-- Project 5 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=23" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Loft Industriel">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Réhabilitation</span>
                            <h3 class="font-serif text-xl">Loft Industriel</h3>
                        </div>
                    </div>
                    <!-- Project 6 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=24" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Commerce Luxe">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Tertiaire</span>
                            <h3 class="font-serif text-xl">Boutique Luxe</h3>
                        </div>
                    </div>
                </div>
                
                <div class="mt-12 text-center md:hidden">
                    <a href="#" class="text-xs uppercase tracking-widest border-b border-black pb-1">Voir tous les projets</a>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-black text-white py-16">
        <div class="container mx-auto px-6 text-center md:text-left">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-12">
                <div>
                    <h4 class="text-xl font-serif mb-6">Atelier Constructions</h4>
                    <p class="text-gray-400 text-sm leading-relaxed">
                        L'art de bâtir des espaces de vie et de travail d'exception.
                    </p>
                </div>
                <div>
                    <h4 class="text-xs uppercase tracking-widest font-bold mb-6 text-gray-500">Contact</h4>
                    <p class="text-gray-400 text-sm">contact@atelierconstructions.fr</p>
                </div>
                <div>
                    <h4 class="text-xs uppercase tracking-widest font-bold mb-6 text-gray-500">Suivez-nous</h4>
                    <div class="flex justify-center md:justify-start space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fa-brands fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fa-brands fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-12 pt-8 border-t border-gray-800 text-center text-xs text-gray-600">
                &copy; 2024 Atelier Constructions.
            </div>
        </div>
    </footer>

    <script>
        // --- CONFIGURATION ---
        const config = {
            
            emailEndpoint: "/send-estimate.php",
basePrice: {
                new: 1500, 
                reno: 1000,
                tertiary: 1100
            },
            floorsMultiplier: 0.05, 
            basementCostPerM2: 550, 
            bathroomCost: 6000,
            finishMultiplier: {
                eco: 1.0,
                standard: 1.2,
                premium: 1.45
            },
            options: {
                // Residential / Common
                pac: 12000,
                clim: 8000,
                alarm: 2500,
                pool: 30000,
                garage: 25000,
                // Tertiary Specific
                network: 4000 + 15, // 4000 + 15€/m² (calculé dynamiquement)
                acoustic: 3000 + 17, // 3000 + 17€/m² (calculé dynamiquement)
                access: 3500,
                camera: 4500
            }
        };

        let state = {
            type: 'new',
            surface: 120,
            floors: 1,
            basement: false,
            baths: 1,
            bedrooms: 2,
            finish: 'standard',
            options: [],
            renoDwelling: null,
            ownership: null,
            timeline: null
        };

        // Keep project type in sync with the radio inputs (robust even if navigation scripts change)
        function syncTypeFromDom() {
            const checked = document.querySelector('input[name="projectType"]:checked');
            if (checked && checked.value) state.type = checked.value;
            return state.type || 'new';
        }
    

        // --- DOM ELEMENTS ---
        const surfaceInput = document.getElementById('surface-input');
        const surfaceDisplay = document.getElementById('surface-display');
        const bathCount = document.getElementById('bath-count');
        const bathLabel = document.getElementById('bath-label');
        const bathSub = document.getElementById('bath-sublabel');
        const bedroomCount = document.getElementById('bedroom-count');
        const bedroomLabel = document.getElementById('bedroom-label');
        const bedroomSub = document.getElementById('bedroom-sublabel');
        const progressBar = document.getElementById('progress-bar');
        const newConstructionFields = document.getElementById('new-construction-fields');
        const residentialOptions = document.getElementById('residential-options');
        const residentialExtras = document.getElementById('residential-extras');
        const tertiaryOptions = document.getElementById('tertiary-options');
        const renoDwellingFields = document.getElementById('reno-dwelling-fields');
        const renoDwellingError = document.getElementById('reno-dwelling-error');
        const bathroomFields = document.getElementById('bathroom-fields');
        const bedroomFields = document.getElementById('bedroom-fields');
        let currentStep = 1;

        // --- UI FUNCTIONS ---

        function scrollToSimulator() {
            document.getElementById('simulateur').scrollIntoView({ behavior: 'smooth' });
        }

        function updateOwnershipQuestion() {
            const questionEl = document.getElementById('ownership-question');
            const yesSub = document.getElementById('ownership-yes-sub');
            const noSub = document.getElementById('ownership-no-sub');
            if (!questionEl || !yesSub || !noSub) return;

            if (state.type === 'reno') {
                questionEl.textContent = 'Avez-vous déjà le bien ?';
                yesSub.textContent = 'Je l’ai déjà / il est en cours d’achat.';
                noSub.textContent = 'Je cherche encore le bien.';
            } else if (state.type === 'tertiary') {
                questionEl.textContent = 'Avez-vous déjà les locaux ?';
                yesSub.textContent = 'Locaux déjà identifiés.';
                noSub.textContent = 'Je recherche des locaux.';
            } else {
                questionEl.textContent = 'Avez-vous déjà le terrain ?';
                yesSub.textContent = 'Je l’ai déjà / il est en cours d’achat.';
                noSub.textContent = 'Je suis en recherche / je n’ai pas encore trouvé.';
            }
        }

        function refreshOwnershipUI() {
            document.querySelectorAll('.ownership-btn, .ownership-option').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.value === state.ownership);
            });
        }

        function refreshTimelineUI() {
            document.querySelectorAll('.timeline-btn, .timeline-option').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.value === state.timeline);
            });
        }

        function refreshRenoDwellingUI() {
            document.querySelectorAll('.reno-option').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.value === state.renoDwelling);
            });
        }

        // Type Selection
        
        
        
        function selectType(type) {
            if (!type) return;

            // Sync state + radio
            state.type = type;
            const radio = document.querySelector(`input[name="projectType"][value="${type}"]`);
            if (radio) radio.checked = true;

            // Update selection UI to match the site's style
            const typeOptions = document.querySelectorAll('.project-type-option');
            typeOptions.forEach(opt => {
                opt.classList.remove('border-black', 'bg-gray-50');
                opt.classList.add('border-gray-200');
            });
            const selectedOption = document.querySelector(`.project-type-option[data-type="${type}"]`);
            if (selectedOption) {
                selectedOption.classList.add('border-black', 'bg-gray-50');
                selectedOption.classList.remove('border-gray-200');
            }

            // Update labels depending on project type
            if (type === 'tertiary') {
                bathLabel.textContent = 'Nombre de sanitaires';
                bathSub.textContent = '(WC / points d’eau)';
                bedroomLabel.textContent = 'Espaces';
                bedroomSub.textContent = '(bureaux / zones)';
            } else {
                bathLabel.textContent = 'Nombre de salles de bain';
                bathSub.textContent = '(hors WC séparés)';
                bedroomLabel.textContent = 'Chambres';
                bedroomSub.textContent = '(hors pièces annexes)';
            }

            // Reset fields that depend on project type
            state.ownership = null;
            state.timeline = null;
            state.renoDwelling = null;
            refreshOwnershipUI();
            refreshTimelineUI();
            refreshRenoDwellingUI();

            // Move forward only if user is still on step 1
            if (currentStep === 1) {
                nextStep(2);
            }
        }




        // Surface Slider
        surfaceInput.addEventListener('input', (e) => {
            state.surface = parseInt(e.target.value);
            surfaceDisplay.textContent = state.surface;
        });

        // Floors Selection
        function setFloors(num) {
            state.floors = num;
            document.querySelectorAll('.floor-btn').forEach(btn => {
                if(parseInt(btn.dataset.val) === num) {
                    btn.classList.add('bg-black', 'text-white', 'border-black');
                    btn.classList.remove('border-gray-200');
                } else {
                    btn.classList.remove('bg-black', 'text-white', 'border-black');
                    btn.classList.add('border-gray-200');
                }
            });
        }

        // Basement Selection
        function updateBasement(hasBasement) {
            state.basement = hasBasement;
            document.querySelectorAll('.basement-btn').forEach(btn => {
                btn.classList.remove('bg-black', 'text-white', 'border-black');
                btn.classList.add('border-gray-200');
            });
            
            const selectedBtn = document.querySelector(`.basement-btn[data-value="${hasBasement ? 'yes' : 'no'}"]`);
            selectedBtn.classList.add('bg-black', 'text-white', 'border-black');
            selectedBtn.classList.remove('border-gray-200');
        }

        // Baths Counter
        function updateBath(delta) {
            const newVal = state.baths + delta;
            if(newVal >= 1 && newVal <= 10) {
                state.baths = newVal;
                bathCount.textContent = newVal;
            }
        }

        function updateBedrooms(delta) {
            const newVal = state.bedrooms + delta;
            if(newVal >= 0 && newVal <= 12) {
                state.bedrooms = newVal;
                bedroomCount.textContent = newVal;
            }
        }

        // Finish Selection
        function selectFinish(finishType) {
            state.finish = finishType;
            
            document.querySelectorAll('.finish-option').forEach(option => {
                option.classList.remove('selected', 'recommended', 'border-black', 'bg-gray-50');
                option.classList.add('border-gray-200');
            });
            
            const selectedDiv = document.querySelector(`.finish-option[data-finish="${finishType}"]`);
            selectedDiv.classList.add('selected', 'border-black', 'bg-gray-50');
            selectedDiv.classList.remove('border-gray-200');
            
            if(finishType === 'standard') {
                selectedDiv.classList.add('recommended');
            }
        }

        // Navigation
        function nextStep(step) {
            // Handle Conditional Logic for Step 2
            if(step === 2) {
                // Hide floors/basement for Reno AND Tertiary
                if(state.type === 'reno' || state.type === 'tertiary') {
                    newConstructionFields.classList.add('hidden');
                } else {
                    newConstructionFields.classList.remove('hidden');
                }

                if (state.type === 'reno') {
                    renoDwellingFields.classList.remove('hidden');
                } else {
                    renoDwellingFields.classList.add('hidden');
                    if (renoDwellingError) renoDwellingError.classList.add('hidden');
                }

                if (state.type === 'tertiary') {
                    bathroomFields.classList.add('hidden');
                    bedroomFields.classList.add('hidden');
                } else {
                    bathroomFields.classList.remove('hidden');
                    bedroomFields.classList.remove('hidden');
                }
            }

            // Handle Conditional Logic for Step 4 (Options)
            if(step === 4) {
                if(state.type === 'tertiary') {
                    // Hide residential options, show tertiary options
                    residentialOptions.classList.add('hidden');
                    residentialExtras.classList.add('hidden');
                    tertiaryOptions.classList.remove('hidden');
                    
                    // Uncheck residential specific options
                    document.querySelectorAll('#residential-options .option-check, #residential-extras .option-check').forEach(c => {
                        c.checked = false;
                        c.nextElementSibling.classList.remove('selected');
                    });
                } else {
                    // Show residential options, hide tertiary options
                    residentialOptions.classList.remove('hidden');
                    residentialExtras.classList.remove('hidden');
                    tertiaryOptions.classList.add('hidden');
                    
                    // Uncheck tertiary specific options
                    document.querySelectorAll('#tertiary-options .option-check').forEach(c => {
                        c.checked = false;
                        c.nextElementSibling.classList.remove('selected');
                    });
                }
            }

            // Transitions
            document.querySelectorAll('.sim-step').forEach(el => {
                el.classList.add('hidden');
                el.classList.remove('fade-enter-active');
            });
            
            const nextEl = document.getElementById(`step-${step}`);
            nextEl.classList.remove('hidden');
            setTimeout(() => nextEl.classList.add('fade-enter-active'), 10);

            // Progress Bar
            const progress = (step / 6) * 100;
            progressBar.style.width = `${progress}%`;
            currentStep = step;

            if (step === 5) {
                updateOwnershipQuestion();
                refreshOwnershipUI();
                refreshTimelineUI();
            }

        }

        function prevStep(step) {
            nextStep(step);
        }

        // --- CALCULATION ENGINE ---
        function calculateProject() {
            syncTypeFromDom();
const qErr = document.getElementById('step5-error');
            if (qErr) qErr.classList.add('hidden');
            if (state.ownership === null || state.timeline === null) {
                if (qErr) qErr.classList.remove('hidden');
                nextStep(5);
                return;
            }

            let baseCost = 0;
            let basementCost = 0;

            if (state.type === 'new') {
                baseCost = state.surface * config.basePrice.new;
                if(state.floors > 1) {
                    baseCost = baseCost * (1 + ((state.floors - 1) * config.floorsMultiplier));
                }
                if(state.basement) {
                    const footprint = state.surface / state.floors;
                    basementCost = footprint * config.basementCostPerM2;
                }
            } else if (state.type === 'reno') {
                baseCost = state.surface * config.basePrice.reno;
            } else if (state.type === 'tertiary') {
                baseCost = state.surface * config.basePrice.tertiary;
            }

            // Bathrooms
            const bathsCost = state.baths * config.bathroomCost;

            // Subtotal before finish multiplier
            let subTotal = baseCost + basementCost + bathsCost;

            // Apply Finish Multiplier
            let totalWithFinish = subTotal * config.finishMultiplier[state.finish];

            // Add Options
            let optionsCost = 0;
            const selectedOptions = [];
            
            document.querySelectorAll('.option-check:checked').forEach(chk => {
                let optionCost = 0;
                
                // Calculate option cost based on type
                if(chk.value === 'network') {
                    // 4000 + 15€/m²
                    optionCost = 4000 + (15 * state.surface);
                } else if(chk.value === 'acoustic') {
                    // 3000 + 17€/m²
                    optionCost = 3000 + (17 * state.surface);
                } else {
                    // Fixed cost for other options
                    optionCost = config.options[chk.value];
                }
                
                optionsCost += optionCost;
                const label = chk.nextElementSibling.querySelector('span').textContent;
                selectedOptions.push(label);
            });

            let finalTotal = totalWithFinish + optionsCost;

            if (state.type === 'reno' && state.renoDwelling === 'apartment') {
                finalTotal = finalTotal * 1.05;
            }

            
            // Store the latest estimate for email sending
            state.lastEstimate = {
                total: Math.round(finalTotal),
                type: state.type,
                surface: state.surface,
                floors: state.floors,
                basement: state.basement,
                baths: state.baths,
                bedrooms: state.bedrooms,
                finish: state.finish,
                options: selectedOptions,
                renoDwelling: state.renoDwelling,
                ownership: state.ownership,
                timeline: state.timeline,
                createdAt: new Date().toISOString()
            };

// --- DISPLAY RESULTS ---
            document.getElementById('final-price').textContent = Math.round(finalTotal).toLocaleString('fr-FR') + ' €';
            
            let typeLabel = 'Construction Neuve';
            if(state.type === 'reno') typeLabel = 'Rénovation';
            if(state.type === 'tertiary') typeLabel = 'Espace Tertiaire';
            
            document.getElementById('res-type').textContent = typeLabel;
            document.getElementById('res-surface').textContent = `${state.surface} m²`;
            
            const finishNames = {
                'eco': 'Essentielle',
                'standard': 'Contemporaine', 
                'premium': 'Prestige'
            };
            document.getElementById('res-finish').textContent = finishNames[state.finish];
            
            document.getElementById('res-options').textContent = selectedOptions.length > 0 ? selectedOptions.join(', ') : 'Aucune';

            // Qualification info in summary
            const ownershipLabels = { new: "Terrain déjà en votre possession", reno: "Bien déjà en votre possession", tertiary: "Locaux déjà en votre possession" };
            const timelineLabels = { lt1: "< 1 mois", "1to3": "1 à 3 mois", gt3: "> 3 mois" };

            const ownLabelEl = document.getElementById('res-ownership-label');
            if (ownLabelEl) ownEl.textContent = ownershipLabels[state.type] || "Bien / terrain";

            const ownEl = document.getElementById('res-ownership');
            if (ownEl) ownEl.textContent = state.ownership === 'yes' ? "Oui" : "Non";

            const tlEl = document.getElementById('res-timeline');
            if (tlEl) tlEl.textContent = timelineLabels[state.timeline] || "—";


            // Update Price Suffix based on type
            const suffixElement = document.getElementById('price-suffix');
            if (state.type === 'tertiary') {
                suffixElement.textContent = "HT";
            } else {
                suffixElement.textContent = "TTC (Hors terrain)";
            }

            nextStep(6);
        }

        function resetSim() {
            state = {
                type: 'new',
                surface: 120,
                floors: 1,
                basement: false,
                baths: 1,
                bedrooms: 2,
                finish: 'standard',
                options: [],
                renoDwelling: null,
                ownership: null,
                timeline: null
            };
            
            // Reset UI
            surfaceInput.value = 120;
            surfaceDisplay.textContent = 120;
            setFloors(1);
            updateBasement(false);
            bathCount.textContent = 1;
            bedroomCount.textContent = 2;
            
            // Reset type selection
            document.querySelectorAll('.project-type-option').forEach(option => {
                option.classList.remove('border-black', 'bg-gray-50');
                option.classList.add('border-gray-200');
            });
            document.querySelector('.project-type-option[data-type="new"]').classList.add('border-black', 'bg-gray-50');
            
            // Reset finish selection
            document.querySelectorAll('.finish-option').forEach(option => {
                option.classList.remove('selected', 'border-black', 'bg-gray-50');
                option.classList.add('border-gray-200');
            });
            document.getElementById('finish-standard').classList.add('border-black', 'bg-gray-50', 'recommended');
            document.getElementById('finish-standard').classList.remove('border-gray-200');
            
            // Reset options
            document.querySelectorAll('.option-check').forEach(c => {
                c.checked = false;
                c.nextElementSibling.classList.remove('selected');
            });

            refreshRenoDwellingUI();
            
            // Reset labels
            bathLabel.textContent = "Salles de bain";
            bathSub.textContent = "Points d'eau complets";

            // Reset ownership & timeline selections
            document.querySelectorAll('.ownership-btn, .ownership-option, .timeline-btn, .timeline-option').forEach(btn => {
                btn.classList.remove('selected');
            });
            const step5ErrEl = document.getElementById('step5-error');
            if (step5ErrEl) step5ErrEl.classList.add('hidden');

            
            nextStep(1);
        }

        // --- EVENT LISTENERS ---
        function initSimulatorNav() {

            // Navigation buttons (robust binding + prevent default)
const bindClick = (id, fn) => {
    const el = document.getElementById(id);
    if (!el) return;
    el.addEventListener('click', (e) => {
        e.preventDefault();
        try { fn(e); } catch (err) { console.error(err); }
    });
};

// Step 1: project type selection (click + keyboard)
(() => {
    const typeOptions = document.querySelectorAll('.project-type-option');
    typeOptions.forEach(option => {
        option.addEventListener('click', (e) => {
            // Keep the native radio behaviour
            const type = option.getAttribute('data-type') ||
                option.querySelector('input[type="radio"]')?.value;

            if (!type) return;
            selectType(type);
        });
    });

    document.querySelectorAll('input[name="projectType"]').forEach(input => {
        input.addEventListener('change', () => {
            selectType(input.value);
        });
    });
})();


// Step 2 -> Step 3
bindClick('next-step-2', () => {
    if (state.type === 'reno' && !state.renoDwelling) {
        if (renoDwellingError) renoDwellingError.classList.remove('hidden');
        return;
    }
    nextStep(3);
});
bindClick('prev-step-2', () => prevStep(1));

// Header / hero CTAs
bindClick('estimate-btn', () => scrollToSimulator());
bindClick('start-study-btn', () => scrollToSimulator());

// Step 3 -> Step 4
bindClick('next-step-3', () => nextStep(4));
bindClick('prev-step-3', () => prevStep(2));

// Step 4 -> Step 5
bindClick('calculate-btn', () => nextStep(5));
bindClick('prev-step-4', () => prevStep(3));

// Bath + bedroom counters
bindClick('bath-minus', () => updateBath(-1));
bindClick('bath-plus', () => updateBath(1));
bindClick('bedroom-minus', () => updateBedrooms(-1));
bindClick('bedroom-plus', () => updateBedrooms(1));

// Reno dwelling selection
(() => {
    document.querySelectorAll('.reno-option').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            state.renoDwelling = btn.dataset.value || null;
            if (renoDwellingError) renoDwellingError.classList.add('hidden');
            refreshRenoDwellingUI();
        });
    });
})();

// Finish selection cards
(() => {
    document.querySelectorAll('input[name="finish"]').forEach(input => {
        input.addEventListener('change', () => {
            if (input.checked) {
                selectFinish(input.value);
            }
        });
    });
})();

// Step 5 -> Results
bindClick('calculate-btn-final', () => calculateProject());
bindClick('prev-step-5', () => prevStep(4));

bindClick('reset-sim', () => resetSim());

// Step 5 (qualification) button groups: ownership + timeline
(() => {
    const step5ErrEl = document.getElementById('step5-error');
    const ownershipBtns = Array.from(document.querySelectorAll('.ownership-btn, .ownership-option'));
    const timelineBtns  = Array.from(document.querySelectorAll('.timeline-btn, .timeline-option'));

    const selectBtn = (btns, btn, key) => {
        btns.forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        state[key] = btn.dataset.value || btn.getAttribute('data-value') || null;
        if (step5ErrEl) step5ErrEl.classList.add('hidden');
    };

    ownershipBtns.forEach(btn => btn.addEventListener('click', (e) => {
        e.preventDefault();
        selectBtn(ownershipBtns, btn, 'ownership');
    }));
    timelineBtns.forEach(btn => btn.addEventListener('click', (e) => {
        e.preventDefault();
        selectBtn(timelineBtns, btn, 'timeline');
    }));
})();

// Options cards (checkbox + visual selection)
(() => {
    document.querySelectorAll('.option-check').forEach(chk => {
        const card = chk.nextElementSibling;
        if (card) {
            card.classList.toggle('selected', chk.checked);
        }
        chk.addEventListener('change', () => {
            if (card) {
                card.classList.toggle('selected', chk.checked);
            }
        });
    });
})();


// --- EMAIL SENDING

 // (backend required) ---
            const emailInput = document.getElementById('sim-email');
            const sendEstimateBtn = document.getElementById('send-estimate-btn');
            const emailStatus = document.getElementById('email-status');

            

function setEmailStatus(message, kind) {
    if (!emailStatus) return;

    const base = "mt-4 text-sm border px-4 py-3";
    if (kind === "success") {
        emailStatus.className = base + " border-black/10 bg-gray-50 text-black";
        emailStatus.innerHTML = `<div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-full bg-black text-white flex items-center justify-center flex-shrink-0">
                <i class="fa-solid fa-check text-xs"></i>
            </div>
            <div>
                <div class="font-serif text-base">Envoi confirmé</div>
                <div class="text-gray-600">${message}</div>
            </div>
        </div>`;
    } else if (kind === "error") {
        emailStatus.className = base + " border-black/10 bg-white text-black";
        emailStatus.innerHTML = `<div class="flex items-start gap-3">
            <div class="w-8 h-8 rounded-full border border-black/20 text-black flex items-center justify-center flex-shrink-0">
                <i class="fa-solid fa-circle-exclamation text-xs"></i>
            </div>
            <div>
                <div class="font-serif text-base">Information</div>
                <div class="text-gray-600">${message}</div>
            </div>
        </div>`;
    } else {
        emailStatus.className = base + " border-black/10 bg-white text-black";
        emailStatus.textContent = message;
    }

    emailStatus.classList.remove("hidden");
}
function isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            async function sendEstimateEmail() {
                if (!emailInput || !sendEstimateBtn) return;

                const email = (emailInput.value || '').trim();
                if (!isValidEmail(email)) {
                    setEmailStatus("Merci d’indiquer une adresse email valide.", "error");
                    return;
                }

                if (!state.lastEstimate) {
                    setEmailStatus("Veuillez d’abord calculer une estimation.", "error");
                    return;
                }

                // Build a friendly summary
                const typeLabel = state.type === 'reno' ? 'Réhabilitation' : (state.type === 'tertiary' ? 'Espace tertiaire' : 'Construction neuve');
                const finishNames = { eco: 'Essentielle', standard: 'Contemporaine', premium: 'Prestige' };
                const priceSuffix = state.type === 'tertiary' ? 'HT' : 'TTC (Hors terrain)';

                const payload = {
                    email,
                    estimate: state.lastEstimate,
                    summary: {
                        typeLabel,
                        surface: state.surface,
                        floors: state.floors,
                        basement: state.basement,
                        baths: state.baths,
                        finishLabel: finishNames[state.finish] || state.finish,
                        options: state.lastEstimate.options || [],
                        total: state.lastEstimate.total,
                        priceSuffix
                    }
                };

                sendEstimateBtn.disabled = true;
                const prevText = sendEstimateBtn.textContent;
                sendEstimateBtn.textContent = "Envoi...";
                if (emailStatus) { emailStatus.classList.add("hidden"); emailStatus.innerHTML = ""; }

                try {
                    const res = await fetch(config.emailEndpoint, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(payload)
                    });

                    const data = await res.json().catch(() => ({}));

                    if (!res.ok || data.ok !== true) {
                        throw new Error(data.error || "Erreur lors de l’envoi.");
                    }

                    setEmailStatus("Votre estimation vient de vous être envoyée par email. Pensez à vérifier vos indésirables.", "success");
                } catch (err) {
                    setEmailStatus("Impossible d’envoyer l’email pour le moment. Réessayez dans quelques instants.", "error");
                    console.error(err);
                } finally {
                    sendEstimateBtn.disabled = false;
                    sendEstimateBtn.textContent = prevText;
                }
            }

            if (sendEstimateBtn) {
                sendEstimateBtn.addEventListener('click', sendEstimateEmail);
            }




if (emailInput) {
    emailInput.addEventListener('input', () => {
        if (emailStatus) { emailStatus.classList.add("hidden"); emailStatus.innerHTML = ""; }
    });
}// Initialize UI
            setFloors(1);
            updateBasement(false);
            selectFinish('standard');
        
}
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initSimulatorNav);
} else {
  initSimulatorNav();
}
</script>

<script>
/* simulateur patch script removed: consolidated in main simulator script */
</script>

</body>
</html>
