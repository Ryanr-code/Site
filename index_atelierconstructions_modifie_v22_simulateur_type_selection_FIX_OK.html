<!DOCTYPE html>
<html lang="fr">
<head>
    <base target="_self">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ATELIER CONSTRUCTION | L'Art de Bâtir</title>
    <meta name="description" content="Construction neuve, rénovation de prestige et aménagement d'espaces tertiaires.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        black: "#111111",
                        dark: "#1a1a1a",
                        gold: "#C5A059", 
                        cream: "#F9F9F7",
                        stone: "#e6e4e0"
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Lato"', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body { -webkit-font-smoothing: antialiased; }
        
        /* Transitions douces */
        .fade-enter { opacity: 0; transform: translateY(10px); }
        .fade-enter-active { opacity: 1; transform: translateY(0); transition: all 0.5s ease-out; }
        
        /* Custom Checkbox Design */
        .option-card.selected { border-color: #111; background-color: #F9F9F7; }
        .option-card.selected .check-icon { opacity: 1; transform: scale(1); }

        .ownership-option.selected,
        .timeline-option.selected,
        .reno-option.selected {
            border-color: #111;
            background-color: #F9F9F7;
        }
        
        /* Hide scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        /* Timeline connector */
        .timeline-line::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            width: 1px;
            background: rgba(17,17,17,0.18);
            transform: translateX(-50%);
            z-index: 0;
        }
        @media (max-width: 767px) {
            .timeline-line::before { left: 20px; }
        }

/* Finish selection styles */
        .finish-option.selected {
            border-color: #111;
            background-color: #F9F9F7;
        }
        .finish-option.recommended {
            border-color: #111;
            background-color: #F9F9F7;
        }

        /* Image Hover Effects */
        .img-zoom-container { overflow: hidden; }
        .img-zoom { transition: transform 0.7s ease; }
        .group:hover .img-zoom { transform: scale(1.05); }
    </style>
</head>
<body class="bg-white text-black font-sans">

    <!-- Header -->
    <header class="fixed w-full top-0 z-50 bg-white/95 backdrop-blur-sm border-b border-gray-100 transition-all duration-300" id="navbar">
        <div class="container mx-auto px-6 py-5 flex justify-between items-center">
            <a href="#" class="text-2xl font-serif tracking-widest font-bold uppercase">Atelier<span class="text-xs align-top ml-1 font-sans font-normal text-gray-500">Constructions</span></a>
            
            <nav class="hidden md:flex space-x-10 text-xs uppercase tracking-widest font-bold text-gray-500">
                <a href="#signatures" class="hover:text-black transition-colors">Inspirations</a>
                <a href="#philosophie" class="hover:text-black transition-colors">Expertise</a>
                <a href="#chronologie" class="hover:text-black transition-colors">Parcours</a>
                <a href="#realisations" class="hover:text-black transition-colors">Réalisations</a>
            </nav>

            <button id="estimate-btn" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800 transition-colors shadow-lg">
                Estimer mon projet
            </button>
        </div>
</header>

    <main class="pt-20">
        
        <!-- Hero -->
        <section class="relative h-[90vh] w-full overflow-hidden flex items-center justify-center bg-gray-900">
            <!-- Background Image with Overlay -->
            <div class="absolute inset-0 w-full h-full">
                <img src="https://picsum.photos/1920/1080?random=101" alt="Architecture Moderne" class="w-full h-full object-cover opacity-70">
                <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/60"></div>
            </div>
            
            <div class="relative z-10 text-center text-white px-4 max-w-5xl">
                <span class="block text-xs md:text-sm uppercase tracking-[0.4em] mb-6 text-gray-200 border-b border-white/20 pb-6 inline-block px-8">Résidentiel & Tertiaire</span>
                <h1 class="text-5xl md:text-7xl font-serif mb-8 leading-tight">L'exigence du détail.<br>La passion de bâtir.</h1>
                <p class="text-lg font-light text-gray-200 mb-10 max-w-2xl mx-auto">
                    Nous transformons vos ambitions en espaces d'exception. De la conception à la remise des clés, vivez une expérience de construction sereine.
                </p>
                <div class="flex flex-col md:flex-row gap-4 justify-center">
                    <button id="start-study-btn" class="bg-white text-black px-10 py-4 text-xs uppercase tracking-widest hover:bg-gray-200 transition-all duration-300 font-bold">
                        Démarrer l'étude
                    </button>
                    <a href="#signatures" class="border border-white text-white px-10 py-4 text-xs uppercase tracking-widest hover:bg-white hover:text-black transition-all duration-300">
                        Voir nos réalisations
                    </a>
                </div>
            </div>
        </section>

        <!-- Trust Indicators (Redesigned - Architectural Manifesto Style) -->
        <section class="bg-white py-24">
            <div class="container mx-auto px-6 max-w-6xl">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-12 md:gap-20">
                    
                    <!-- Pillar 1 -->
                    <div class="flex flex-col items-start group">
                        <span class="text-xs font-bold text-gray-300 mb-4 group-hover:text-black transition-colors">01</span>
                        <h3 class="font-serif text-2xl mb-4 text-black">Maîtrise</h3>
                        <div class="w-12 h-px bg-gray-200 mb-6 group-hover:w-24 group-hover:bg-black transition-all duration-500"></div>
                        <p class="text-sm text-gray-500 leading-relaxed font-light">
                            L'alliance de l'esthétique et de la performance. Nous sélectionnons des matériaux nobles et durables pour des constructions qui traversent le temps.
                        </p>
                    </div>

                    <!-- Pillar 2 -->
                    <div class="flex flex-col items-start group">
                        <span class="text-xs font-bold text-gray-300 mb-4 group-hover:text-black transition-colors">02</span>
                        <h3 class="font-serif text-2xl mb-4 text-black">Sérénité</h3>
                        <div class="w-12 h-px bg-gray-200 mb-6 group-hover:w-24 group-hover:bg-black transition-all duration-500"></div>
                        <p class="text-sm text-gray-500 leading-relaxed font-light">
                            Un cadre contractuel sécurisé. Votre projet est couvert par l'ensemble des garanties légales (Décennale & Responsabilité Civile Professionnelle).
                        </p>
                    </div>

                    <!-- Pillar 3 -->
                    <div class="flex flex-col items-start group">
                        <span class="text-xs font-bold text-gray-300 mb-4 group-hover:text-black transition-colors">03</span>
                        <h3 class="font-serif text-2xl mb-4 text-black">Clarté</h3>
                        <div class="w-12 h-px bg-gray-200 mb-6 group-hover:w-24 group-hover:bg-black transition-all duration-500"></div>
                        <p class="text-sm text-gray-500 leading-relaxed font-light">
                            Une gestion de projet transparente. Des coûts maîtrisés et un calendrier respecté pour avancer en toute confiance, sans surprise.
                        </p>
                    </div>

                </div>
            </div>
        </section>

        <!-- Section Signatures (Visual Showcase) -->
        <section id="signatures" class="py-24 bg-cream">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16">
                    <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Inspirations</span>
                    <h2 class="text-4xl font-serif mt-3 mb-6">Nos Signatures</h2>
                    <p class="text-gray-500 max-w-2xl mx-auto">Découvrez la diversité de nos savoir-faire à travers une sélection de projets récents.</p>
                </div>

                <!-- Masonry Grid -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 h-auto md:h-[600px]">
                    <!-- Large Item Left -->
                    <div class="lg:col-span-2 lg:row-span-2 group relative overflow-hidden cursor-pointer h-96 md:h-full">
                        <img src="https://picsum.photos/800/800?random=50" class="w-full h-full object-cover img-zoom" alt="Villa Contemporaine">
                        <div class="absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all"></div>
                        <div class="absolute bottom-0 left-0 p-8 text-white">
                            <span class="text-xs uppercase tracking-widest bg-black/50 px-2 py-1 mb-2 inline-block backdrop-blur-sm">Construction Neuve</span>
                            <h3 class="text-2xl font-serif">Villa "Horizon"</h3>
                        </div>
                    </div>
                    
                    <!-- Top Right 1 -->
                    <div class="group relative overflow-hidden cursor-pointer h-64 md:h-full">
                        <img src="https://picsum.photos/400/600?random=51" class="w-full h-full object-cover img-zoom" alt="Intérieur Design">
                        <div class="absolute bottom-0 left-0 p-6 text-white bg-gradient-to-t from-black/80 to-transparent w-full">
                            <h3 class="text-lg font-serif">Intérieurs Sur-mesure</h3>
                        </div>
                    </div>

                    <!-- Top Right 2 -->
                    <div class="group relative overflow-hidden cursor-pointer h-64 md:h-full">
                        <img src="https://picsum.photos/400/600?random=52" class="w-full h-full object-cover img-zoom" alt="Rénovation">
                        <div class="absolute bottom-0 left-0 p-6 text-white bg-gradient-to-t from-black/80 to-transparent w-full">
                            <h3 class="text-lg font-serif">Rénovation Haussmannienne</h3>
                        </div>
                    </div>

                    <!-- Bottom Right Wide (spanning 2 cols on desktop if needed, here kept simple) -->
                    <div class="lg:col-span-2 group relative overflow-hidden cursor-pointer h-64 md:h-full hidden lg:block">
                        <img src="https://picsum.photos/800/400?random=53" class="w-full h-full object-cover img-zoom" alt="Bureaux">
                        <div class="absolute bottom-0 left-0 p-6 text-white bg-gradient-to-t from-black/80 to-transparent w-full">
                            <h3 class="text-lg font-serif">Espaces Tertiaires</h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gallery Grid Expanded -->
        <section id="realisations" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <div class="flex justify-between items-end mb-12">
                    <div>
                        <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Portfolio</span>
                        <h2 class="text-3xl font-serif mt-2">Dernières Réalisations</h2>
                    </div>
                    <a href="#" class="hidden md:block text-xs uppercase tracking-widest border-b border-black pb-1 hover:text-gray-600">Voir tous les projets</a>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Project 1 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=10" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Maison Contemporaine">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Résidentiel</span>
                            <h3 class="font-serif text-xl">Villa H</h3>
                        </div>
                    </div>
                    <!-- Project 2 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=11" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Rénovation Appartement">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Rénovation</span>
                            <h3 class="font-serif text-xl">Appartement L</h3>
                        </div>
                    </div>
                    <!-- Project 3 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=12" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Maison de campagne">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Construction</span>
                            <h3 class="font-serif text-xl">Maison R</h3>
                        </div>
                    </div>
                    <!-- Project 4 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=13" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Boutique Luxe">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Tertiaire</span>
                            <h3 class="font-serif text-xl">Boutique B</h3>
                        </div>
                    </div>
                    <!-- Project 5 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=14" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Bureaux Modernes">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Bureaux</span>
                            <h3 class="font-serif text-xl">Bureaux S</h3>
                        </div>
                    </div>
                    <!-- Project 6 -->
                    <div class="group relative overflow-hidden cursor-pointer">
                        <img src="https://picsum.photos/600/800?random=15" class="w-full h-80 object-cover grayscale group-hover:grayscale-0 transition-all duration-700 img-zoom" alt="Rénovation Loft">
                        <div class="absolute bottom-0 left-0 p-6 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-500 bg-gradient-to-t from-black/80 to-transparent w-full">
                            <span class="text-xs uppercase tracking-widest">Rénovation</span>
                            <h3 class="font-serif text-xl">Loft M</h3>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Timeline Section -->
        <section id="chronologie" class="py-24 bg-cream">
            <div class="container mx-auto px-6 max-w-5xl">
                <div class="text-center mb-16">
                    <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Processus</span>
                    <h2 class="text-4xl font-serif mt-3 mb-6">Notre Parcours de Projet</h2>
                    <p class="text-gray-500 max-w-2xl mx-auto">Un accompagnement complet, étape par étape, pour une réalisation sans faille.</p>
                </div>
                
                <div class="relative timeline-line">
                    <!-- Timeline Item 1 -->
                    <div class="flex items-center mb-20 relative">
                        <div class="w-1/2 pr-8 text-right">
                            <h3 class="font-serif text-2xl mb-2">01. Étude Préliminaire</h3>
                            <p class="text-gray-500 text-sm">Analyse de vos besoins, étude de faisabilité et proposition initiale.</p>
                        </div>
                        <div class="relative w-10 h-10 bg-black text-white rounded-full flex items-center justify-center z-10">
                            <span class="text-sm font-bold">01</span>
                        </div>
                        <div class="w-1/2 pl-8"></div>
                    </div>

                    <!-- Timeline Item 2 -->
                    <div class="flex items-center mb-20 relative">
                        <div class="w-1/2 pr-8"></div>
                        <div class="relative w-10 h-10 bg-black text-white rounded-full flex items-center justify-center z-10">
                            <span class="text-sm font-bold">02</span>
                        </div>
                        <div class="w-1/2 pl-8">
                            <h3 class="font-serif text-2xl mb-2">02. Conception & Design</h3>
                            <p class="text-gray-500 text-sm">Création des plans, design intérieur et sélection des matériaux.</p>
                        </div>
                    </div>

                    <!-- Timeline Item 3 -->
                    <div class="flex items-center mb-20 relative">
                        <div class="w-1/2 pr-8 text-right">
                            <h3 class="font-serif text-2xl mb-2">03. Chiffrage & Validation</h3>
                            <p class="text-gray-500 text-sm">Estimation précise des coûts et validation du projet.</p>
                        </div>
                        <div class="relative w-10 h-10 bg-black text-white rounded-full flex items-center justify-center z-10">
                            <span class="text-sm font-bold">03</span>
                        </div>
                        <div class="w-1/2 pl-8"></div>
                    </div>

                    <!-- Timeline Item 4 -->
                    <div class="flex items-center mb-20 relative">
                        <div class="w-1/2 pr-8"></div>
                        <div class="relative w-10 h-10 bg-black text-white rounded-full flex items-center justify-center z-10">
                            <span class="text-sm font-bold">04</span>
                        </div>
                        <div class="w-1/2 pl-8">
                            <h3 class="font-serif text-2xl mb-2">04. Réalisation</h3>
                            <p class="text-gray-500 text-sm">Mise en œuvre du chantier, suivi qualité et respect des délais.</p>
                        </div>
                    </div>

                    <!-- Timeline Item 5 -->
                    <div class="flex items-center relative">
                        <div class="w-1/2 pr-8 text-right">
                            <h3 class="font-serif text-2xl mb-2">05. Livraison</h3>
                            <p class="text-gray-500 text-sm">Remise des clés et accompagnement post-projet.</p>
                        </div>
                        <div class="relative w-10 h-10 bg-black text-white rounded-full flex items-center justify-center z-10">
                            <span class="text-sm font-bold">05</span>
                        </div>
                        <div class="w-1/2 pl-8"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Simulator Section -->
        <section id="simulator" class="py-24 bg-white">
            <div class="container mx-auto px-6 max-w-6xl">
                <div class="text-center mb-16">
                    <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Simulateur</span>
                    <h2 class="text-4xl font-serif mt-3 mb-6">Estimez Votre Projet</h2>
                    <p class="text-gray-500 max-w-2xl mx-auto">Une estimation rapide et personnalisée de votre budget de construction ou rénovation.</p>
                </div>

                <!-- Simulator Content -->
                <div class="bg-white border border-gray-100 shadow-xl p-10">
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

                        <!-- Steps -->
                        <div class="lg:col-span-2">
                            <!-- Step 1 -->
                            <div class="sim-step" id="step-1">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 rounded-full bg-black text-white flex items-center justify-center text-sm font-bold">01</div>
                                    <h3 class="text-xl font-serif ml-4">Type de Projet</h3>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <label class="project-type-option border border-gray-200 p-4 cursor-pointer transition-all hover:border-black" data-type="new">
                                        <input type="radio" name="projectType" value="new" class="hidden" checked>
                                        <div class="text-center">
                                            <i class="fa-solid fa-house text-2xl mb-2"></i>
                                            <p class="text-sm font-bold">Construction Neuve</p>
                                        </div>
                                    </label>
                                    <label class="project-type-option border border-gray-200 p-4 cursor-pointer transition-all hover:border-black" data-type="reno">
                                        <input type="radio" name="projectType" value="reno" class="hidden">
                                        <div class="text-center">
                                            <i class="fa-solid fa-hammer text-2xl mb-2"></i>
                                            <p class="text-sm font-bold">Réhabilitation</p>
                                        </div>
                                    </label>
                                    <label class="project-type-option border border-gray-200 p-4 cursor-pointer transition-all hover:border-black" data-type="tertiary">
                                        <input type="radio" name="projectType" value="tertiary" class="hidden">
                                        <div class="text-center">
                                            <i class="fa-solid fa-building text-2xl mb-2"></i>
                                            <p class="text-sm font-bold">Espace Tertiaire</p>
                                        </div>
                                    </label>
                                </div>
                                <div class="mt-6 text-right">
                                    <button id="next-step-1" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">Suivant</button>
                                </div>
                            </div>

                            <!-- Step 2 -->
                            <div class="sim-step hidden" id="step-2">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 rounded-full bg-black text-white flex items-center justify-center text-sm font-bold">02</div>
                                    <h3 class="text-xl font-serif ml-4">Surface & Étages</h3>
                                </div>
                                <div class="mb-8">
                                    <label class="block text-sm font-bold mb-2">Surface (m²)</label>
                                    <input type="range" id="surface-range" min="50" max="500" value="120" class="w-full">
                                    <div class="text-right text-sm text-gray-500"><span id="surface-display">120</span> m²</div>
                                </div>
                                <div class="mb-8">
                                    <label class="block text-sm font-bold mb-2">Nombre d'étages</label>
                                    <div class="flex items-center gap-4">
                                        <button type="button" id="floor-minus" class="w-10 h-10 border border-gray-200 flex items-center justify-center">-</button>
                                        <span id="floor-count" class="text-lg font-bold">1</span>
                                        <button type="button" id="floor-plus" class="w-10 h-10 border border-gray-200 flex items-center justify-center">+</button>
                                    </div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button id="prev-step-2" class="text-xs uppercase tracking-widest text-gray-500 hover:text-black">Précédent</button>
                                    <button id="next-step-2" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">Suivant</button>
                                </div>
                            </div>

                            <!-- Step 3 -->
                            <div class="sim-step hidden" id="step-3">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 rounded-full bg-black text-white flex items-center justify-center text-sm font-bold">03</div>
                                    <h3 class="text-xl font-serif ml-4">Nombre de pièces</h3>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div>
                                        <label class="block text-sm font-bold mb-2" id="bedroom-label">Chambres</label>
                                        <div class="flex items-center gap-4">
                                            <button type="button" id="bedroom-minus" class="w-10 h-10 border border-gray-200 flex items-center justify-center">-</button>
                                            <span id="bedroom-count" class="text-lg font-bold">2</span>
                                            <button type="button" id="bedroom-plus" class="w-10 h-10 border border-gray-200 flex items-center justify-center">+</button>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-bold mb-2" id="bathroom-label">Salles de bain</label>
                                        <div class="flex items-center gap-4">
                                            <button type="button" id="bath-minus" class="w-10 h-10 border border-gray-200 flex items-center justify-center">-</button>
                                            <span id="bath-count" class="text-lg font-bold">1</span>
                                            <button type="button" id="bath-plus" class="w-10 h-10 border border-gray-200 flex items-center justify-center">+</button>
                                        </div>
                                        <div class="text-xs text-gray-400 mt-2" id="bathroom-sub">Points d'eau complets</div>
                                    </div>
                                </div>
                                <div class="flex justify-between mt-6">
                                    <button id="prev-step-3" class="text-xs uppercase tracking-widest text-gray-500 hover:text-black">Précédent</button>
                                    <button id="next-step-3" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">Suivant</button>
                                </div>
                            </div>

                            <!-- Step 4 -->
                            <div class="sim-step hidden" id="step-4">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 rounded-full bg-black text-white flex items-center justify-center text-sm font-bold">04</div>
                                    <h3 class="text-xl font-serif ml-4">Finitions & Options</h3>
                                </div>
                                <div class="mb-8">
                                    <label class="block text-sm font-bold mb-4">Niveau de finition</label>
                                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                        <label class="finish-option border border-gray-200 p-4 cursor-pointer transition-all hover:border-black" id="finish-eco">
                                            <input type="radio" name="finish" value="eco" class="hidden">
                                            <div class="text-center">
                                                <p class="text-sm font-bold">Essentielle</p>
                                            </div>
                                        </label>
                                        <label class="finish-option border border-gray-200 p-4 cursor-pointer transition-all hover:border-black recommended" id="finish-standard">
                                            <input type="radio" name="finish" value="standard" class="hidden" checked>
                                            <div class="text-center">
                                                <p class="text-sm font-bold">Contemporaine</p>
                                            </div>
                                        </label>
                                        <label class="finish-option border border-gray-200 p-4 cursor-pointer transition-all hover:border-black" id="finish-premium">
                                            <input type="radio" name="finish" value="premium" class="hidden">
                                            <div class="text-center">
                                                <p class="text-sm font-bold">Prestige</p>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="mb-8">
                                    <label class="block text-sm font-bold mb-4">Options supplémentaires</label>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <label class="option-card border border-gray-200 p-4 cursor-pointer transition-all hover:border-black">
                                            <input type="checkbox" class="hidden option-check" value="piscine">
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm">Piscine</span>
                                                <i class="fa-solid fa-check check-icon text-xs opacity-0 transition-all"></i>
                                            </div>
                                        </label>
                                        <label class="option-card border border-gray-200 p-4 cursor-pointer transition-all hover:border-black">
                                            <input type="checkbox" class="hidden option-check" value="garage">
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm">Garage</span>
                                                <i class="fa-solid fa-check check-icon text-xs opacity-0 transition-all"></i>
                                            </div>
                                        </label>
                                        <label class="option-card border border-gray-200 p-4 cursor-pointer transition-all hover:border-black">
                                            <input type="checkbox" class="hidden option-check" value="terrasse">
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm">Terrasse</span>
                                                <i class="fa-solid fa-check check-icon text-xs opacity-0 transition-all"></i>
                                            </div>
                                        </label>
                                        <label class="option-card border border-gray-200 p-4 cursor-pointer transition-all hover:border-black">
                                            <input type="checkbox" class="hidden option-check" value="cuisine">
                                            <div class="flex items-center justify-between">
                                                <span class="text-sm">Cuisine équipée</span>
                                                <i class="fa-solid fa-check check-icon text-xs opacity-0 transition-all"></i>
                                            </div>
                                        </label>
                                    </div>
                                </div>

                                <div class="flex justify-between mt-6">
                                    <button id="prev-step-4" class="text-xs uppercase tracking-widest text-gray-500 hover:text-black">Précédent</button>
                                    <button id="calculate-btn" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">Calculer</button>
                                </div>
                            </div>

                            <!-- Step 5 -->
                            <div class="sim-step hidden" id="step-5">
                                <div class="flex items-center mb-6">
                                    <div class="w-10 h-10 rounded-full bg-black text-white flex items-center justify-center text-sm font-bold">05</div>
                                    <h3 class="text-xl font-serif ml-4">Informations complémentaires</h3>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-sm font-bold mb-4">Terrain / Bien</label>
                                        <div class="grid grid-cols-1 gap-3">
                                            <button type="button" class="ownership-btn border border-gray-200 px-4 py-3 text-sm text-left hover:border-black" data-value="land">J'ai le terrain</button>
                                            <button type="button" class="ownership-btn border border-gray-200 px-4 py-3 text-sm text-left hover:border-black" data-value="land+house">Terrain + Maison</button>
                                            <button type="button" class="ownership-btn border border-gray-200 px-4 py-3 text-sm text-left hover:border-black" data-value="house">J'ai le bien</button>
                                        </div>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-bold mb-4">Échéance</label>
                                        <div class="grid grid-cols-1 gap-3">
                                            <button type="button" class="timeline-btn border border-gray-200 px-4 py-3 text-sm text-left hover:border-black" data-value="0-3">0-3 mois</button>
                                            <button type="button" class="timeline-btn border border-gray-200 px-4 py-3 text-sm text-left hover:border-black" data-value="3-6">3-6 mois</button>
                                            <button type="button" class="timeline-btn border border-gray-200 px-4 py-3 text-sm text-left hover:border-black" data-value="6+">6+ mois</button>
                                        </div>
                                    </div>
                                </div>
                                <div id="step5-error" class="hidden mt-4 text-sm text-red-500">Merci de sélectionner une option pour chaque catégorie.</div>
                                <div class="flex justify-between mt-6">
                                    <button id="prev-step-5" class="text-xs uppercase tracking-widest text-gray-500 hover:text-black">Précédent</button>
                                    <button id="calculate-btn-final" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">Voir l'estimation</button>
                                </div>
                            </div>
                        </div>

                        <!-- Results -->
                        <div class="lg:col-span-1">
                            <div class="bg-cream p-10 max-w-lg mx-auto mb-10 border border-gray-100 shadow-inner">
                                <div class="text-xs uppercase tracking-widest text-gray-500 mb-2">Budget Estimatif Global</div>
                                <div class="text-5xl font-serif text-black mb-2" id="final-price">-- €</div>
                                <div id="price-suffix" class="text-xs text-gray-400 mb-6">TTC (Hors terrain)</div>
                                
                                <div class="pt-6 border-t border-gray-200 text-left space-y-3 text-sm text-gray-600">
                                    <div class="flex justify-between"><span>Type</span> <span id="res-type" class="font-bold text-black"></span></div>
                                    <div class="flex justify-between"><span>Bien</span> <span id="res-dwelling" class="font-bold text-black"></span></div>
                                    <div class="flex justify-between"><span>Surface</span> <span id="res-surface" class="font-bold text-black"></span></div>
                                    <div class="flex justify-between"><span>Chambres</span> <span id="res-bedrooms" class="font-bold text-black"></span></div>
                                    <div class="flex justify-between"><span>Finition</span> <span id="res-finish" class="font-bold capitalize text-black"></span></div>
                        <div class="flex justify-between"><span id="res-ownership-label" class="text-black">Terrain / Bien</span><span id="res-ownership" class="font-bold text-black"></span></div>
                        <div class="flex justify-between"><span class="text-black">Échéance</span><span id="res-timeline" class="font-bold text-black"></span></div>
                                    <div class="flex justify-between"><span>Options</span> <span id="res-options" class="font-bold text-right text-black max-w-[50%]"></span></div>
                                </div>
                            </div>

                            <div class="max-w-md mx-auto">
                                <p class="text-sm text-gray-500 mb-6">Recevez le détail complet et une étude de faisabilité gratuite.</p>
                                <div class="flex gap-2">
                                    <input id="sim-email" type="email" placeholder="Votre Email" class="flex-1 p-3 border border-gray-300 focus:border-black outline-none bg-white">
                                    <button type="button" id="send-estimate-btn" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">
                                        Envoyer
                                    </button>
                                </div>
                            </div>
<div id="email-status" class="mt-4 hidden" aria-live="polite"></div>
                            
                            <button type="button" id="reset-sim" class="mt-8 text-xs text-gray-400 underline hover:text-black">Nouvelle simulation</button>
                        </div>

                    </div>
                </div>
            </div>
        </section>

        <!-- CTA Section -->
        <section id="philosophie" class="py-24 bg-dark text-white">
            <div class="container mx-auto px-6 max-w-5xl text-center">
                <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Notre philosophie</span>
                <h2 class="text-4xl font-serif mt-3 mb-6">L’Art de Construire</h2>
                <p class="text-gray-300 max-w-3xl mx-auto">Chaque projet est une œuvre. Nous allions savoir-faire artisanal, expertise technique et vision architecturale pour des réalisations qui vous ressemblent.</p>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-24 bg-cream">
            <div class="container mx-auto px-6 max-w-5xl">
                <div class="text-center mb-16">
                    <span class="text-xs font-bold uppercase tracking-widest text-gray-400">Contact</span>
                    <h2 class="text-4xl font-serif mt-3 mb-6">Parlons de votre projet</h2>
                    <p class="text-gray-500 max-w-2xl mx-auto">Obtenez un accompagnement personnalisé pour réaliser votre projet de construction ou rénovation.</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-xl font-serif mb-4">Atelier Constructions</h3>
                        <p class="text-gray-500 text-sm mb-2">Paris, France</p>
                        <p class="text-gray-500 text-sm mb-2">contact@atelier-constructions.fr</p>
                        <p class="text-gray-500 text-sm">+33 1 23 45 67 89</p>
                    </div>
                    <div>
                        <form class="space-y-4">
                            <div>
                                <input type="text" placeholder="Votre nom" class="w-full p-3 border border-gray-300 focus:border-black outline-none bg-white">
                            </div>
                            <div>
                                <input type="email" placeholder="Votre email" class="w-full p-3 border border-gray-300 focus:border-black outline-none bg-white">
                            </div>
                            <div>
                                <textarea placeholder="Votre message" class="w-full p-3 border border-gray-300 focus:border-black outline-none bg-white"></textarea>
                            </div>
                            <button type="submit" class="bg-black text-white px-6 py-3 text-xs uppercase tracking-widest hover:bg-gray-800">Envoyer</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white py-10 border-t border-gray-100">
        <div class="container mx-auto px-6 text-center text-gray-400 text-xs">
            © 2025 Atelier Constructions. Tous droits réservés.
        </div>
    </footer>

<script>
let state = {
    type: "new",
    renoDwelling: "",
    surface: 120,
    floors: 1,
    basement: false,
    baths: 1,
    bedrooms: 2,
    finish: "standard",
    options: [],
    ownership: null,
    timeline: null,
    lastEstimate: null
};

// --- CONFIG (email + pricing) ---
const config = {
    emailEndpoint: "https://example.com/send-estimate",
    pricing: {
        new: { base: 1900, perFloor: 140, bath: 4000, bedroom: 4500 },
        reno: { base: 1600, perFloor: 0,   bath: 3500, bedroom: 4000 },
        tertiary: { base: 1400, perFloor: 100, bath: 2500, bedroom: 3000 },
        finishMultipliers: {
            eco: 1.0,
            standard: 1.2,
            premium: 1.45
        },
        options: {
            piscine: 25000,
            garage: 15000,
            terrasse: 8000,
            cuisine: 10000
        }
    }
};

// --- UI ELEMENTS ---
const steps = document.querySelectorAll('.sim-step');
const nextStep1Btn = document.getElementById('next-step-1');
const nextStep2Btn = document.getElementById('next-step-2');
const nextStep3Btn = document.getElementById('next-step-3');
const prevStep2Btn = document.getElementById('prev-step-2');
const prevStep3Btn = document.getElementById('prev-step-3');
const prevStep4Btn = document.getElementById('prev-step-4');
const prevStep5Btn = document.getElementById('prev-step-5');
const calculateBtn = document.getElementById('calculate-btn');
const calculateFinalBtn = document.getElementById('calculate-btn-final');
const resetSimBtn = document.getElementById('reset-sim');

const surfaceInput = document.getElementById('surface-range');
const surfaceDisplay = document.getElementById('surface-display');

const floorCount = document.getElementById('floor-count');
const floorMinusBtn = document.getElementById('floor-minus');
const floorPlusBtn = document.getElementById('floor-plus');

const bedroomCount = document.getElementById('bedroom-count');
const bedroomMinusBtn = document.getElementById('bedroom-minus');
const bedroomPlusBtn = document.getElementById('bedroom-plus');

const bathCount = document.getElementById('bath-count');
const bathMinusBtn = document.getElementById('bath-minus');
const bathPlusBtn = document.getElementById('bath-plus');
const bathLabel = document.getElementById('bathroom-label');
const bathSub = document.getElementById('bathroom-sub');

const finalPrice = document.getElementById('final-price');
const priceSuffix = document.getElementById('price-suffix');
const resType = document.getElementById('res-type');
const resDwelling = document.getElementById('res-dwelling');
const resSurface = document.getElementById('res-surface');
const resBedrooms = document.getElementById('res-bedrooms');
const resFinish = document.getElementById('res-finish');
const resOwnership = document.getElementById('res-ownership');
const resOwnershipLabel = document.getElementById('res-ownership-label');
const resTimeline = document.getElementById('res-timeline');
const resOptions = document.getElementById('res-options');

const renoDwellingError = document.getElementById('reno-dwelling-error');

function showStep(num) {
    steps.forEach(step => step.classList.add('hidden'));
    const step = document.getElementById(`step-${num}`);
    if (step) step.classList.remove('hidden');
}

function nextStep(num) {
    showStep(num);
}

function prevStep(num) {
    showStep(num);
}

function scrollToSimulator() {
    document.getElementById('simulator')?.scrollIntoView({ behavior: 'smooth' });
}

function updateSurface(value) {
    state.surface = parseInt(value, 10);
    surfaceDisplay.textContent = state.surface;
}

function setFloors(value) {
    state.floors = Math.max(1, value);
    floorCount.textContent = state.floors;
}

function updateBasement(value) {
    state.basement = value;
}

function updateBedrooms(delta) {
    state.bedrooms = Math.max(1, state.bedrooms + delta);
    bedroomCount.textContent = state.bedrooms;
}

function updateBath(delta) {
    state.baths = Math.max(1, state.baths + delta);
    bathCount.textContent = state.baths;
}

function selectFinish(finish) {
    state.finish = finish;
    document.querySelectorAll('.finish-option').forEach(option => {
        option.classList.remove('selected', 'border-black', 'bg-gray-50');
        option.classList.add('border-gray-200');
    });
    const selected = document.getElementById(`finish-${finish}`);
    if (selected) {
        selected.classList.add('selected', 'border-black', 'bg-gray-50');
        selected.classList.remove('border-gray-200');
    }
}

function selectType(type) {
    state.type = type;

    document.querySelectorAll('.project-type-option').forEach(option => {
        option.classList.remove('border-black', 'bg-gray-50');
        option.classList.add('border-gray-200');
    });

    const selectedOption = document.querySelector(`.project-type-option[data-type="${type}"]`);
    if (selectedOption) {
        selectedOption.classList.add('border-black', 'bg-gray-50');
        selectedOption.classList.remove('border-gray-200');
    }

    refreshRenoDwellingUI();
}

function refreshRenoDwellingUI() {
    const renoSection = document.getElementById('reno-section');
    if (!renoSection) return;
    if (state.type === 'reno') {
        renoSection.classList.remove('hidden');
    } else {
        renoSection.classList.add('hidden');
        state.renoDwelling = '';
        if (renoDwellingError) renoDwellingError.classList.add('hidden');
    }
}

function calculateProject() {
    const pricing = config.pricing[state.type];
    let total = state.surface * pricing.base;

    total += state.floors * pricing.perFloor;
    total += state.baths * pricing.bath;
    total += state.bedrooms * pricing.bedroom;

    const finishMultiplier = pricing.finishMultipliers[state.finish] || 1;
    total *= finishMultiplier;

    const selectedOptions = [];
    document.querySelectorAll('.option-check:checked').forEach(opt => {
        const val = opt.value;
        selectedOptions.push(val);
        total += pricing.options[val] || 0;
    });

    state.options = selectedOptions;
    state.lastEstimate = {
        total: Math.round(total),
        options: selectedOptions
    };

    const formatter = new Intl.NumberFormat('fr-FR');
    finalPrice.textContent = `${formatter.format(state.lastEstimate.total)} €`;

    const typeLabel = state.type === 'reno' ? 'Réhabilitation' : (state.type === 'tertiary' ? 'Espace tertiaire' : 'Construction neuve');
    resType.textContent = typeLabel;

    resDwelling.textContent = state.renoDwelling || "—";
    resSurface.textContent = `${state.surface} m²`;
    resBedrooms.textContent = state.bedrooms;
    resFinish.textContent = state.finish;

    if (state.type === 'tertiary') {
        priceSuffix.textContent = 'HT';
    } else {
        priceSuffix.textContent = 'TTC (Hors terrain)';
    }

    resOptions.textContent = selectedOptions.length ? selectedOptions.join(', ') : 'Aucune';

    resOwnership.textContent = state.ownership || "—";
    resTimeline.textContent = state.timeline || "—";
}

function resetSim() {
    state = {
        type: "new",
        renoDwelling: "",
        surface: 120,
        floors: 1,
        basement: false,
        baths: 1,
        bedrooms: 2,
        finish: "standard",
        options: [],
        ownership: null,
        timeline: null,
        lastEstimate: null
    };

    surfaceInput.value = 120;
    surfaceDisplay.textContent = 120;
    setFloors(1);
    updateBasement(false);
    bathCount.textContent = 1;
    bedroomCount.textContent = 2;
    
    // Reset type selection
    document.querySelectorAll('.project-type-option').forEach(option => {
        option.classList.remove('border-black', 'bg-gray-50');
        option.classList.add('border-gray-200');
    });
    document.querySelector('.project-type-option[data-type="new"]').classList.add('border-black', 'bg-gray-50');
    
    // Reset finish selection
    document.querySelectorAll('.finish-option').forEach(option => {
        option.classList.remove('selected', 'border-black', 'bg-gray-50');
        option.classList.add('border-gray-200');
    });
    document.getElementById('finish-standard').classList.add('border-black', 'bg-gray-50', 'recommended');
    document.getElementById('finish-standard').classList.remove('border-gray-200');
    
    // Reset options
    document.querySelectorAll('.option-check').forEach(c => {
        c.checked = false;
        c.nextElementSibling.classList.remove('selected');
    });

    refreshRenoDwellingUI();
    
    // Reset labels
    bathLabel.textContent = "Salles de bain";
    bathSub.textContent = "Points d'eau complets";

    // Reset ownership & timeline selections
    document.querySelectorAll('.ownership-btn, .ownership-option, .timeline-btn, .timeline-option').forEach(btn => {
        btn.classList.remove('selected');
    });
    const step5ErrEl = document.getElementById('step5-error');
    if (step5ErrEl) step5ErrEl.classList.add('hidden');

    
    nextStep(1);
}

// --- EVENT LISTENERS ---
function initSimulatorNav() {

    // Navigation buttons (robust binding + prevent default)
const bindClick = (id, fn) => {
    const el = document.getElementById(id);
    if (!el) return;
    el.addEventListener('click', (e) => {
        e.preventDefault();
        try { fn(e); } catch (err) { console.error(err); }
    });
};

// Step 1: project type selection (click + keyboard)
(() => {
    const typeOptions = document.querySelectorAll('.project-type-option');
    typeOptions.forEach(option => {
        option.addEventListener('click', (e) => {
            // Keep the native radio behaviour
            const type = option.getAttribute('data-type') ||
                option.querySelector('input[type="radio"]')?.value;

            if (!type) return;
            selectType(type);
        });
    });

    document.querySelectorAll('input[name="projectType"]').forEach(input => {
        input.addEventListener('change', () => {
            selectType(input.value);
        });
    });
})();


// Step 2 -> Step 3
bindClick('next-step-2', () => {
    if (state.type === 'reno' && !state.renoDwelling) {
        if (renoDwellingError) renoDwellingError.classList.remove('hidden');
        return;
    }
    nextStep(3);
});
bindClick('prev-step-2', () => prevStep(1));

// Header / hero CTAs
bindClick('estimate-btn', () => scrollToSimulator());
bindClick('start-study-btn', () => scrollToSimulator());

// Step 3 -> Step 4
bindClick('next-step-3', () => nextStep(4));
bindClick('prev-step-3', () => prevStep(2));

// Step 4 -> Step 5
bindClick('calculate-btn', () => {
    nextStep(5);
    document.getElementById('step-5')?.scrollIntoView({ behavior: 'smooth' });
});
bindClick('prev-step-4', () => prevStep(3));

// Bath + bedroom counters
bindClick('bath-minus', () => updateBath(-1));
bindClick('bath-plus', () => updateBath(1));
bindClick('bedroom-minus', () => updateBedrooms(-1));
bindClick('bedroom-plus', () => updateBedrooms(1));

// Reno dwelling selection
(() => {
    document.querySelectorAll('.reno-option').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.preventDefault();
            state.renoDwelling = btn.dataset.value || null;
            if (renoDwellingError) renoDwellingError.classList.add('hidden');
            refreshRenoDwellingUI();
        });
    });
})();

// Finish selection cards
(() => {
    document.querySelectorAll('input[name="finish"]').forEach(input => {
        input.addEventListener('change', () => {
            if (input.checked) {
                selectFinish(input.value);
            }
        });
    });
})();

// Step 5 -> Results
bindClick('calculate-btn-final', () => calculateProject());
bindClick('prev-step-5', () => prevStep(4));

bindClick('reset-sim', () => resetSim());

// Step 5 (qualification) button groups: ownership + timeline
(() => {
    const step5ErrEl = document.getElementById('step5-error');
    const ownershipBtns = Array.from(document.querySelectorAll('.ownership-btn, .ownership-option'));
    const timelineBtns  = Array.from(document.querySelectorAll('.timeline-btn, .timeline-option'));

    const selectBtn = (btns, btn, key) => {
        btns.forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        state[key] = btn.dataset.value || btn.getAttribute('data-value') || null;
        if (step5ErrEl) step5ErrEl.classList.add('hidden');
    };

    ownershipBtns.forEach(btn => btn.addEventListener('click', (e) => {
        e.preventDefault();
        selectBtn(ownershipBtns, btn, 'ownership');
    }));
    timelineBtns.forEach(btn => btn.addEventListener('click', (e) => {
        e.preventDefault();
        selectBtn(timelineBtns, btn, 'timeline');
    }));
})();

// Options cards (checkbox + visual selection)
(() => {
    document.querySelectorAll('.option-check').forEach(chk => {
        const card = chk.nextElementSibling;
        if (card) {
            card.classList.toggle('selected', chk.checked);
        }
        chk.addEventListener('change', () => {
            if (card) {
                card.classList.toggle('selected', chk.checked);
            }
        });
    });
})();


// --- EMAIL SENDING

 // (backend required) ---
            const emailInput = document.getElementById('sim-email');
            const sendEstimateBtn = document.getElementById('send-estimate-btn');
            const emailStatus = document.getElementById('email-status');

            

function setEmailStatus(message, kind) {
    if (!emailStatus) return;

    const base = "mt-4 text-sm border px-4 py-3 max-w-md mx-auto text-center";
    if (kind === "success") {
        emailStatus.className = base + " border-black/10 bg-gray-50 text-black";
        emailStatus.innerHTML = `<div class="flex flex-col items-center gap-3 text-center">
            <div class="w-8 h-8 rounded-full bg-black text-white flex items-center justify-center flex-shrink-0">
                <i class="fa-solid fa-check text-xs"></i>
            </div>
            <div>
                <div class="font-serif text-base">Envoi confirmé</div>
                <div class="text-gray-600">${message}</div>
            </div>
        </div>`;
    } else if (kind === "error") {
        emailStatus.className = base + " border-black/10 bg-white text-black";
        emailStatus.innerHTML = `<div class="flex flex-col items-center gap-3 text-center">
            <div class="w-8 h-8 rounded-full border border-black/20 text-black flex items-center justify-center flex-shrink-0">
                <i class="fa-solid fa-circle-exclamation text-xs"></i>
            </div>
            <div>
                <div class="font-serif text-base">Information</div>
                <div class="text-gray-600">${message}</div>
            </div>
        </div>`;
    } else {
        emailStatus.className = base + " border-black/10 bg-white text-black";
        emailStatus.textContent = message;
    }

    emailStatus.classList.remove("hidden");
}
function isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            async function sendEstimateEmail() {
                if (!emailInput || !sendEstimateBtn) return;

                const email = (emailInput.value || '').trim();
                if (!isValidEmail(email)) {
                    setEmailStatus("Merci d’indiquer une adresse email valide.", "error");
                    return;
                }

                if (!state.lastEstimate) {
                    setEmailStatus("Veuillez d’abord calculer une estimation.", "error");
                    return;
                }

                // Build a friendly summary
                const typeLabel = state.type === 'reno' ? 'Réhabilitation' : (state.type === 'tertiary' ? 'Espace tertiaire' : 'Construction neuve');
                const finishNames = { eco: 'Essentielle', standard: 'Contemporaine', premium: 'Prestige' };
                const priceSuffix = state.type === 'tertiary' ? 'HT' : 'TTC (Hors terrain)';

                const payload = {
                    email,
                    estimate: state.lastEstimate,
                    summary: {
                        typeLabel,
                        surface: state.surface,
                        floors: state.floors,
                        basement: state.basement,
                        baths: state.baths,
                        finishLabel: finishNames[state.finish] || state.finish,
                        options: state.lastEstimate.options || [],
                        total: state.lastEstimate.total,
                        priceSuffix
                    }
                };

                sendEstimateBtn.disabled = true;
                const prevText = sendEstimateBtn.textContent;
                sendEstimateBtn.textContent = "Envoi...";
                if (emailStatus) { emailStatus.classList.add("hidden"); emailStatus.innerHTML = ""; }

                try {
                    const res = await fetch(config.emailEndpoint, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(payload)
                    });

                    const data = await res.json().catch(() => ({}));

                    if (!res.ok || data.ok !== true) {
                        throw new Error(data.error || "Erreur lors de l’envoi.");
                    }

                    setEmailStatus("Votre estimation vient de vous être envoyée par email. Pensez à vérifier vos indésirables.", "success");
                } catch (err) {
                    setEmailStatus("Impossible d’envoyer l’email pour le moment. Réessayez dans quelques instants.", "error");
                    console.error(err);
                } finally {
                    sendEstimateBtn.disabled = false;
                    sendEstimateBtn.textContent = prevText;
                }
            }

            if (sendEstimateBtn) {
                sendEstimateBtn.addEventListener('click', sendEstimateEmail);
            }




if (emailInput) {
    emailInput.addEventListener('input', () => {
        if (emailStatus) { emailStatus.classList.add("hidden"); emailStatus.innerHTML = ""; }
    });
}// Initialize UI
            setFloors(1);
            updateBasement(false);
            selectFinish('standard');
        
}
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initSimulatorNav);
} else {
  initSimulatorNav();
}
</script>

<script>
/* simulateur patch script removed: consolidated in main simulator script */
</script>

</body>
</html>
